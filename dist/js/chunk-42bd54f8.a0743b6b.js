(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42bd54f8"],{"16ba":function(t,e,a){},a30f:function(t,e,a){"use strict";var i=a("16ba"),s=a.n(i);s.a},fc15:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("el-button",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{type:"primary"},on:{click:t.createTaskSource}},[t._v("修改任务来源")])],1),a("div",{staticClass:"task-input-box"},[a("el-form",{attrs:{"label-width":"130px",id:"selectForm"}},[a("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"任务来源"}},[a("el-col",{attrs:{span:1}},[a("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.radio)+" ")])],1)],1),a("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"商品种类"}},[a("el-col",{attrs:{span:13}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{change:t.handleChange},model:{value:t.commodityName,callback:function(e){t.commodityName=e},expression:"commodityName"}})],1)],1),a("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"交易平台"}},[a("el-col",{attrs:{span:13}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择平台名称"},model:{value:t.flatName,callback:function(e){t.flatName=e},expression:"flatName"}},t._l(t.flatList,(function(e,i){return a("el-option",{key:i,attrs:{label:e.flatName,value:e.flatName},on:{change:t.handleChange}})})),1)],1)],1),a("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"交易风险类型"}},[a("el-col",{attrs:{span:13}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择交易风险类型"},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}},[a("el-option",{attrs:{label:"交易主体异常",value:"交易主体异常"}}),a("el-option",{attrs:{label:"仓单异常",value:"仓单异常"}}),a("el-option",{attrs:{label:"融资异常",value:"融资异常"}}),a("el-option",{attrs:{label:"质押权异常",value:"质押权异常"}})],1)],1)],1),a("el-button",{attrs:{type:"success"},on:{click:t.createTask}},[t._v("立即创建")]),a("el-button",{attrs:{type:"info"},on:{click:t.abortForm}},[t._v("取消创建")])],1)],1),a("el-dialog",{attrs:{title:"请选择任务来源",visible:t.formTaskVisible,width:"60%"},on:{"update:visible":function(e){t.formTaskVisible=e}}},[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:"主体智能查验"}},[t._v("主体智能查验")]),a("el-radio",{attrs:{label:"交易过程监测"}},[t._v("交易过程监测")]),a("el-radio",{attrs:{label:"交易风险智能分析与预警"}},[t._v("交易风险智能分析与预警")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.InputTaskSourceTrue}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"确认创建任务",visible:t.formDialogVisible,width:"50%"},on:{"update:visible":function(e){t.formDialogVisible=e}}},[a("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"任务来源"}},[a("el-col",[a("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.radio)+" ")])],1)],1),a("el-form-item",{attrs:{label:"商品种类"}},[a("el-col",[a("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.commodityName)+" ")])],1)],1),a("el-form-item",{attrs:{label:"交易平台"}},[a("el-col",[a("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.flatName)+" ")])],1)],1),a("el-form-item",{attrs:{label:"交易风险类型"}},[a("el-col",[a("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.taskType)+" ")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.formDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.formDialogTrue}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.dialogActiveVisible,title:"主动监管名单",width:"40%",center:""},on:{"update:visible":function(e){t.dialogActiveVisible=e}}},[a("p",{staticStyle:{"font-size":"1rem"}},[t._v(" 平台风险值： "),"高"===t.valueMean?a("span",{staticStyle:{"margin-right":"1rem",color:"red"}},[t._v(t._s(t.valueRisk))]):"中"===t.valueMean?a("span",{staticStyle:{"margin-right":"1rem",color:"orange"}},[t._v(t._s(t.valueRisk))]):"低"===t.valueMean?a("span",{staticStyle:{"margin-right":"1rem",color:"green"}},[t._v(t._s(t.valueRisk))]):t._e(),t._v(" 风险程度： "),"高"===t.valueMean?a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.valueMean))]):"中"===t.valueMean?a("span",{staticStyle:{color:"orange"}},[t._v(t._s(t.valueMean))]):"低"===t.valueMean?a("span",{staticStyle:{color:"green"}},[t._v(t._s(t.valueMean))]):t._e()]),a("el-table",{attrs:{data:t.formActiveList,"default-sort":{prop:"p",order:"descending"},stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"主体"}}),a("el-table-column",{attrs:{prop:"p",label:"异常值",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(parseFloat(e.row.p).toFixed(3)))])]}}])})],1)],1)],1)},s=[],o=(a("c975"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("09ea")),n=a("5e05"),l=(a("c0b3"),a("5f87")),r=["a","b","c"],c={data:function(){return{checkAllCommodity:!1,checkedCommodity:["a"],isIndeterminateCommodity:!0,commodities:r,isCommodity:!1,commodityName:"",flatList:[],flatName:"",taskType:"",isIndeterminate:!1,taskinputt:this.taskin,input:"",priority:"",humanUse:!1,dateStart:"",dateStart2:"",dateEnd:"",dateEnd2:"",workingTime:"",deadLine:"",timeAdvise:"",content:this.flatName,tradeUser:!1,formDialogVisible:!1,formTaskVisible:!0,radio:"主体智能查验",showStart:"",showEnd:"",dialogActiveVisible:!1,valueRisk:"",valueMean:"",formActiveList:[]}},props:["taskin"],created:function(){var t=this;"OMS"!=Object(l["b"])()?(console.log("去rs的任务输入"),this.$router.push("/trade/Multimodal-multigranularity/stepBar/taskInputForRS")):(Object(o["f"])().then((function(e){console.log("这是OMS的任务输入");var a=e.data.data;console.log(a);for(var i=[],s=0;s<a.length;s++)i.push(a[s].bourse);t.cities=i,console.log(i)})).catch((function(){console.log("taskQuery fail")})),this.taskin&&(Object.prototype.hasOwnProperty.call(this.taskin,"changeflag")&&console.log(this.taskin.changeflag),console.log(this.taskin.name),this.input=this.taskin.name,this.priority=this.taskin.priority,this.humanUse=this.taskin.humanUse,this.content=this.taskin.content))},computed:{address:function(){return console.log(this.taskin),""}},watch:{"taskin.changeflag":function(){console.log("flag变了"),console.log(this.taskin),this.input=this.taskin.name,this.priority=this.taskin.priority?this.taskin.priority:1,this.commodityName=this.taskin.commodityName,this.workingTime=this.taskin.workingTime,this.deadLine=this.taskin.deadLine,this.humanUse=this.taskin.humanUse,this.content=this.taskin.content,this.content||(this.content="暂时未分配"),"是"==this.taskin.humanUse&&(this.humanUse=1),"否"==this.taskin.humanUse&&(this.humanUse=0),this.taskin.changeflag==Number.POSITIVE_INFINITY&&this.cleanForm();var t=document.getElementById("neirong");console.log(t.text)}},methods:{handleChange:function(t){this.getFlatList()},handleCloseCommodityTag:function(t){this.commodityTags.splice(this.commodityTags.indexOf(t),1)},setFlatList:function(t){for(var e=0;e<t.length;e++){var a={};a.flatName=t[e],this.flatList.push(a)}},getFlatList:function(){var t,e=this,a="/getplatform?commodity="+this.commodityName;Object(o["B"])(a).then((function(a){t=a.data.data,e.setFlatList(t),console.log(e.flatList)})).catch((function(t){console.log(t)}))},setFlats:function(t){for(var e=0;e<t.length;e++){var a={};a.flat_name=t[e].platform,a.flat_num=t[e].association,this.flatData.push(a)}},formDialogTrue:function(){this.postData(),this.formDialogVisible=!1,this.$message({message:"恭喜你，任务提交成功",type:"success"})},InputTaskSourceTrue:function(){this.formTaskVisible=!1,this.$message({message:"恭喜你，任务来源选择成功",type:"success"})},handleCloseFlatTag:function(t){this.flatTags.splice(this.flatTags.indexOf(t),1)},handleCheckAllChange:function(t){this.checkedCities=t?this.cities:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){console.log(this.checkedCities);var e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=e>0&&e<this.cities.length},setTimeRecommend:function(t){var e=parseInt(t),a=new Date,i=new Date;this.dateEnd=a,i.setDate(i.getDate()-e),this.dateStart=i},getTimeRecommend:function(){var t=this,e=this.commodityName;console.log("时间粒度 获得商品：",e);var a,i="/getcommodityTimeadvise2/"+e;Object(o["y"])(i).then((function(i){var s=[];s=i.data,a=s[0].timeadvise,console.log("result----111:",a),t.timeAdvise=a;var o=e+"推荐时间粒度为："+a+"天";t.$message({message:o,type:"success"}),t.setTimeRecommend(a)})).catch((function(t){console.log(t)}))},having:function(){return console.log(this.taskin),""!=this.taskin.id},createTask:function(){this.formDialogVisible=!0},createTaskSource:function(){this.formTaskVisible=!0},postAddress:function(){var t=this;this.$confirm("是否确认创建该监管任务","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e="",a=0;a<t.checkedCities.length;a++)0==a&&(e+=t.checkedCities[a]),a>0&&(e+=","+t.checkedCities[a]);console.log(e),console.log("111"),t.content=e,t.postData(),t.$parent.$parent.reloadPage()})).catch((function(){console.log(t.checkedCities.length);for(var e="",a=0;a<t.checkedCities.length;a++)0==a&&(e+=t.checkedCities[a]),a>0&&(e+=","+t.checkedCities[a]);console.log(e)})),this.$parent.$parent.dialogTableVisible=!1},postData:function(){var t=this;console.log("发送请求前");var e=new Date(this.dateStart2).getTime(),a=new Date(this.dateEnd2).getTime(),i=parseInt((new Date).getTime()/1e3),s=new Date(1e3*i),n=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),l=this.flatName+"-"+this.commodityName+"-"+this.taskType+"("+n+")";console.log("elementui 时间形式"+e+"时间2："+a),console.log("humanuse:"+this.humanUse),console.log("taskName:"+l),console.log((new Date).getTime());var r=1==this.humanUse?1:0,c={name:l,priority:this.priority,startTime:1587807522386,endTime:1588404415698,humanUse:r,workingTime:36e5*this.workingTime,deadLine:new Date(this.deadLine).getTime(),timeadvise:this.timeAdvise,tradeuser:this.tradeUser,content:this.flatName,commodityName:this.commodityName};console.log(c),Object(o["G"])(c).then((function(e){t.$router.push("/trade/Multimodal-multigranularity/stepBar/taskQueryTableView").then((function(){console.log("aaa"),t.$parent.$children[0].active=1,t.$store.commit("setStepbarPosition",1),console.log("ccc")}))})).catch((function(t){console.log(t)}))},goto:function(t){return new Promise((function(e,a){this.$router.push(t)}))},abortForm:function(){console.log("zhioiiiiiii"),this.cleanForm(),this.$parent.$parent.dialogTableVisible=!1},cleanForm:function(){console.log("到这里了吗"),this.input="",this.priority="",this.humanUse=!1,this.tradeUser=!1,this.dateStart="",this.dateStart2="",this.dateEnd="",this.dateEnd2="",this.workingTime="",this.deadLine=""},getActiveList:function(){var t=this;Object(n["d"])(this.commodityName,this.flatName).then((function(e){t.valueRisk=e.data.data[0][0].riskvalue,t.valueMean=e.data.data[0][0].riskmean,t.formActiveList=e.data.data[1]})),this.dialogActiveVisible=!0}}},m=c,h=(a("a30f"),a("2877")),d=Object(h["a"])(m,i,s,!1,null,"36265f90",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-42bd54f8.a0743b6b.js.map