{"version":3,"sources":["webpack:///./src/components/part3/Download/detailBar.vue?7dc7","webpack:///src/components/part3/Download/detailBar.vue","webpack:///./src/components/part3/Download/detailBar.vue?e2a4","webpack:///./src/components/part3/Download/detailBar.vue","webpack:///./src/components/part3/Download/detailBar.vue?397a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","auction","name","description","startPrice","updatedPrice","staticStyle","startTime","endTime","form","minimumDecreasePrice","model","value","callback","$$v","$set","expression","on","$event","doAuction","flush","id","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,SAAS,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,KAAK,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQC,SAASP,EAAG,IAAI,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQE,gBAAgBR,EAAG,KAAK,CAACA,EAAG,KAAK,CAACJ,EAAIQ,GAAG,SAASJ,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQG,iBAAiBT,EAAG,KAAK,CAACJ,EAAIQ,GAAG,SAASJ,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQI,qBAAqBV,EAAG,KAAK,CAACW,YAAY,CAAC,gBAAgB,SAAS,CAACX,EAAG,KAAK,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQM,gBAAgBZ,EAAG,KAAK,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQO,gBAAgBb,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQP,EAAIkB,OAAO,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,KAAK,cAAc,OAAO,CAACH,EAAG,kBAAkB,CAACG,MAAM,CAAC,IAAM,EAAE,KAAOP,EAAIU,QAAQS,qBAAqB,IAAMnB,EAAIU,QAAQI,aAAa,MAAQ,IAAIM,MAAM,CAACC,MAAOrB,EAAIkB,KAAU,MAAEI,SAAS,SAAUC,GAAMvB,EAAIwB,KAAKxB,EAAIkB,KAAM,QAASK,IAAME,WAAW,gBAAgBzB,EAAIQ,GAAG,UAAUR,EAAIS,GAAGT,EAAIU,QAAQS,sBAAsB,OAAO,GAAGf,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO3B,EAAI4B,UAAU5B,EAAIkB,SAAS,CAAClB,EAAIQ,GAAG,QAAQJ,EAAG,YAAY,CAACsB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO3B,EAAI6B,MAAM7B,EAAIU,QAAQoB,OAAO,CAAC9B,EAAIQ,GAAG,SAAS,IAAI,IAAI,IAAI,IACv1CuB,EAAkB,G,wBC2CtB,GACE,KAAF,iBACE,MAAF,CACI,KAAJ,CACM,KAAN,OACM,SAAN,IAGE,QARF,WASI,IAAJ,sCACI,KAAJ,eAEE,SAAF,CACI,YADJ,WAEM,MAAN,qDAGE,KAjBF,WAkBI,MAAJ,CACM,MAAN,EACM,eAAN,EACM,SAAN,CACQ,KAAR,iBACQ,KAAR,GACQ,SAAR,GACQ,MAAR,IACQ,KAAR,cACQ,KAAR,mBACQ,KAAR,aACQ,KAAR,QACQ,MAAR,IACQ,WAAR,GAEM,QAAN,GACM,KAAN,CACQ,MAAR,IAEM,KAAN,KAGE,QAAF,CACI,QADJ,WACM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,eACA,mBACQ,QAAR,WAGI,WARJ,SAQA,GAAM,IAAN,OACM,OAAN,OAAM,CAAN,qBACQ,EAAR,eACQ,EAAR,qCACA,mBACQ,QAAR,WAGI,UAhBJ,SAgBA,GAAM,IAAN,OACM,OAAN,OAAM,CAAN,2CACQ,EAAR,UACU,WAAV,EACU,QAAV,OACU,KAAV,YAEQ,EAAR,4BACA,mBACQ,EAAR,UACU,WAAV,EACU,QAAV,OACU,KAAV,aAGM,KAAN,eAEI,MAjCJ,SAiCA,GAAM,IAAN,OACM,OAAN,OAAM,CAAN,qBACQ,EAAR,UACU,WAAV,EACU,QAAV,OACU,KAAV,eAEA,mBACQ,EAAR,UACU,WAAV,EACU,QAAV,OACU,KAAV,cAII,SAhDJ,WAgDM,IAAN,OACM,OAAN,OAAM,CAAN,+BACQ,SAAR,kCACQ,EAAR,iBACQ,EAAR,UACU,QAAV,WACU,KAAV,YAEQ,QAAR,2BACA,kBACQ,EAAR,uBACQ,QAAR,wBAGI,WA9DJ,WA8DM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,wBACQ,EAAR,iBACQ,QAAR,+BACA,kBACQ,QAAR,4BAGI,QAvEJ,WAwEM,IAAN,0BACM,KAAN,mCACM,QAAN,8BAEI,YA5EJ,SA4EA,GACM,OCjK2W,I,wBCQ7WC,EAAY,eACd,EACAjC,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAAqlB,EAAG,G","file":"js/chunk-5d6e22b8.2096a9c8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detailBar\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('h2',[_vm._v(_vm._s(_vm.auction.name))]),_c('p',[_vm._v(_vm._s(_vm.auction.description))]),_c('ul',[_c('li',[_vm._v(\" 起拍价:\"),_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.auction.startPrice))])]),_c('li',[_vm._v(\" 最新价:\"),_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.auction.updatedPrice))])])]),_c('ul',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('li',[_vm._v(\" 开始时间:\"),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.auction.startTime))])]),_c('li',[_vm._v(\" 结束时间:\"),_c('span',{staticClass:\"size\"},[_vm._v(_vm._s(_vm.auction.endTime))])])]),_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"出价\",\"label-width\":\"50\"}},[_c('el-input-number',{attrs:{\"min\":1,\"step\":_vm.auction.minimumDecreasePrice,\"max\":_vm.auction.updatedPrice,\"label\":\"\"},model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}}),_vm._v(\" (价格步长:\"+_vm._s(_vm.auction.minimumDecreasePrice)+\") \")],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.doAuction(_vm.form)}}},[_vm._v(\"竞拍\")]),_c('el-button',{on:{\"click\":function($event){return _vm.flush(_vm.auction.id)}}},[_vm._v(\"刷新\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"detailBar\">\r\n    <el-row>\r\n    <el-col :span=\"12\">\r\n        <h2>{{auction.name}}</h2>\r\n        <p>{{auction.description}}</p>\r\n        <ul>\r\n                <li>\r\n                    起拍价:<span class=\"score\">{{auction.startPrice}}</span>\r\n                </li>\r\n                <li>\r\n                    最新价:<span class=\"score\">{{auction.updatedPrice}}</span>\r\n                </li>\r\n        </ul>\r\n        <ul style=\"margin-bottom: 20px\">\r\n                <li>\r\n                    开始时间:<span class=\"time\">{{auction.startTime}}</span>\r\n                </li>\r\n                <li>\r\n                    结束时间:<span class=\"size\">{{auction.endTime}}</span>\r\n                </li>\r\n        </ul>\r\n            <el-form :model=\"form\">\r\n                <el-form-item label=\"出价\" label-width=\"50\">\r\n                    <el-input-number v-model=\"form.price\" :min=\"1\" :step=\"auction.minimumDecreasePrice\" :max=\"auction.updatedPrice\" label=\"\">\r\n                    </el-input-number>\r\n                    (价格步长:{{auction.minimumDecreasePrice}})\r\n                </el-form-item>\r\n                    <el-button type=\"primary\" @click=\"doAuction(form)\">竞拍</el-button>\r\n                    <el-button @click=\"flush(auction.id)\">刷新</el-button>\r\n            </el-form>\r\n    </el-col>\r\n<!--        <el-col :span=\"12\" style=\"border: #07c160\" >-->\r\n<!--                <h2>拍卖规则</h2>-->\r\n<!--                {{rule}}-->\r\n<!--        </el-col>-->\r\n    </el-row>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n    import {buyData, getuserinfo} from \"@/api/part3\";\r\n    import {doAuction, getAuction, getAuctionRule} from \"@/api/part3/auction\";\r\n\r\n    export default {\r\n        name: \"resourceDetail\",\r\n        props: {\r\n                file: {\r\n                type: Object,\r\n                require: true\r\n            },\r\n    },\r\n        created(){\r\n            const id = this.$router.currentRoute.params.id;\r\n            this.getAuction(id);\r\n        },\r\n        computed:{\r\n            downloadUrl(){\r\n                return \"http://localhost:8088/downloadfile/\"+this.file.id\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                score:0,\r\n                dialogVisible: false,\r\n                resource:{\r\n                    name:\"2012第一季度钢铁交易数据\",\r\n                    type:\"\",\r\n                    category:\"\",\r\n                    score:\"5\",\r\n                    tags:[\"钢铁\",\"交易数据\"],\r\n                    desc:\"关于2012第一季度钢铁交易数据\",\r\n                    time:\"2020-04-23\",\r\n                    size:\"639KB\",\r\n                    value:4.1,\r\n                    collected:true\r\n                },\r\n                auction:{},\r\n                form:{\r\n                    price:\"\"\r\n                },\r\n                rule:\"\"\r\n            }\r\n        },\r\n        methods:{\r\n            getRule(){\r\n                getAuctionRule().then(res=>{\r\n                    this.rule = res.data\r\n                }).catch(err=>{\r\n                    console.log(err)\r\n                })\r\n            },\r\n            getAuction(id){\r\n                getAuction(id).then(res=>{\r\n                    this.auction = res.data\r\n                    this.form.price = this.auction.updatedPrice\r\n                }).catch(err=>{\r\n                    console.log(err)\r\n                })\r\n            },\r\n            doAuction(data){\r\n                doAuction(this.auction.id,data.price).then(res=>{\r\n                    this.$message({\r\n                        showClose: true,\r\n                        message: '竞价成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.getAuction(this.auction.id);\r\n                }).catch(err=>{\r\n                    this.$message({\r\n                        showClose: true,\r\n                        message: '竞价失败',\r\n                        type: 'error'\r\n                    });\r\n                })\r\n                this.form.price = \"\";\r\n            },\r\n            flush(id){\r\n                getAuction(id).then(res=>{\r\n                    this.$message({\r\n                        showClose: true,\r\n                        message: '刷新成功',\r\n                        type: 'success'\r\n                    });\r\n                }).catch(err=>{\r\n                    this.$message({\r\n                        showClose: true,\r\n                        message: '刷新失败',\r\n                        type: 'error'\r\n                    });\r\n                })\r\n            },\r\n            download(){\r\n                buyData(this.file.id).then(()=>{\r\n                    document.getElementById('el-link').click();\r\n                    this.dialogVisible = false\r\n                    this.$message({\r\n                        message: '恭喜你，下载成功',\r\n                        type: 'success'\r\n                    });\r\n                    console.log(\"buydata success!\")\r\n                }).catch(()=>{\r\n                    this.$message.error(\"下载失败\")\r\n                    console.log(\"buydata fail\")\r\n                });\r\n            },\r\n            openDialog(){\r\n                getuserinfo().then((res)=>{\r\n                    this.score = res.data.data.score\r\n                    this.dialogVisible = true\r\n                    console.log(\"getuserinfo success!\")\r\n                }).catch(()=>{\r\n                    console.log(\"getuserinfo fail\")\r\n                });\r\n            },\r\n            collect(){\r\n                let flag = this.resource.collected\r\n                this.$set(this.resource, 'collected', !flag);\r\n                console.log(this.resource.collected)\r\n            },\r\n            handleClose(done) {\r\n                        done();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n    .detailBar\r\n        background-color white\r\n        border: 1px solid #DCDFE6\r\n        text-align left\r\n    li\r\n        display inline-block\r\n        margin-right 10px\r\n    ul\r\n        margin-top  20px\r\n    span.score\r\n        font-weight: 400;\r\n        font-size: 30px;\r\n        color: #ff9358;\r\n        text-align: center;\r\n        margin-left 5px\r\n    .el-col\r\n        padding 0px 10px 10px 10px\r\n\r\n    span.time\r\n        margin-left: 8px\r\n        font-size: 14px\r\n        color: #000000\r\n        font-weight 400\r\n\r\n    span.size\r\n        margin-left: 8px\r\n        font-size: 14px\r\n        color: #000000\r\n        font-weight 400\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detailBar.vue?vue&type=template&id=2a7aa939&scoped=true&\"\nimport script from \"./detailBar.vue?vue&type=script&lang=js&\"\nexport * from \"./detailBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detailBar.vue?vue&type=style&index=0&id=2a7aa939&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a7aa939\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailBar.vue?vue&type=style&index=0&id=2a7aa939&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailBar.vue?vue&type=style&index=0&id=2a7aa939&scoped=true&lang=stylus&\""],"sourceRoot":""}