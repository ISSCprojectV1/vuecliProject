{"version":3,"sources":["webpack:///./src/components/part1/riskPrediction/riskPageNew.vue?75df","webpack:///src/components/part1/riskPrediction/riskPageNew.vue","webpack:///./src/components/part1/riskPrediction/riskPageNew.vue?63b1","webpack:///./src/components/part1/riskPrediction/riskPageNew.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","querySearch","on","handleSelect","model","value","callback","$$v","expression","onClickQuery","goBack","staticStyle","onClickQueryRelation","dialogFormVisible","$event","formRelation","prop","order","scopedSlots","_u","key","fn","scope","onClickRelatedCommodity","row","name","_s","staticRenderFns","data","options","formRisk","commodities","created","mounted","loadAll","commodityFromStore","id","item","day","split","code","closeprice","risk","console","log","err","methods","cb","results","createFilter","history","back","drawChartRiskPrediction","i","j","length","pieces","push","tooltip","trigger","dataZoom","visualMap","dimension","outOfRange","color","show","xAxis","map","yAxis","scale","series","chart","setOption","name2","similarity","component"],"mappings":"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","file":"js/chunk-2d0c7394.4c7fd0b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"大宗商品价格波动风险演化\")]),_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.querySearch,\"placeholder\":\"请输入查询商品\"},on:{\"select\":_vm.handleSelect},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onClickQuery}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回\")])],1)],1),_c('div',{staticStyle:{\"width\":\"1000px\",\"height\":\"500px\",\"margin-left\":\"auto\",\"margin-right\":\"auto\"},attrs:{\"id\":\"chart-risk-prediction\"}}),_c('el-button',{staticStyle:{\"margin-top\":\"2rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onClickQueryRelation}},[_vm._v(\"查询关联商品\")]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogFormVisible,\"width\":\"30%\",\"title\":_vm.value + '关联商品',\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-table',{attrs:{\"data\":_vm.formRelation,\"default-sort\":{prop: 'similarity', order: 'descending'},\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"关联商品\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{staticStyle:{\"color\":\"blue\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.onClickRelatedCommodity(scope.row.name)}}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"similarity\",\"label\":\"相关度\",\"sortable\":\"\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h2>大宗商品价格波动风险演化</h2>\r\n\r\n    <el-form :inline=\"true\">\r\n      <el-form-item>\r\n        <el-autocomplete\r\n            v-model=\"value\"\r\n            :fetch-suggestions=\"querySearch\"\r\n            placeholder=\"请输入查询商品\"\r\n            @select=\"handleSelect\"\r\n        ></el-autocomplete>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onClickQuery\">查询</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"goBack\">返回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div id=\"chart-risk-prediction\"\r\n         style=\"width: 1000px; height: 500px; margin-left: auto; margin-right: auto;\">\r\n    </div>\r\n\r\n    <el-button type=\"primary\" @click=\"onClickQueryRelation\" style=\"margin-top: 2rem\">查询关联商品</el-button>\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible\" width=\"30%\" :title=\"value + '关联商品'\" center>\r\n      <el-table :data=\"formRelation\"\r\n                :default-sort=\"{prop: 'similarity', order: 'descending'}\" stripe>\r\n        <el-table-column\r\n            prop=\"name\"\r\n            label=\"关联商品\">\r\n          <template slot-scope=\"scope\">\r\n            <a @click=\"onClickRelatedCommodity(scope.row.name)\" style=\"color: blue; cursor: pointer\">{{\r\n                scope.row.name\r\n              }}</a>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"similarity\"\r\n            label=\"相关度\" sortable>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getcommodityRelationdetails2} from \"@/api/part1/Multimodal-multigranularity\";\r\nimport * as echarts5 from \"echarts5\";\r\nimport {getDataRiskChart} from \"@/api/part1/riskPrediction\";\r\n\r\nexport default {\r\n  name: \"riskPageNew\",\r\n  data() {\r\n    return {\r\n      value: '小麦',\r\n      options: [],\r\n      formRisk: [],\r\n      formRelation: [],\r\n      commodities: [], // 用于输入框补全建议\r\n      dialogFormVisible: false\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n    this.commodities = this.loadAll();\r\n\r\n    let commodityFromStore = this.$store.state.commodityForMonitoring;\r\n    if (commodityFromStore)\r\n      this.value = commodityFromStore;\r\n    getDataRiskChart(this.value).then(res => {\r\n      this.formRisk = res.data.map(item => {\r\n        return {\r\n          id: item.id,\r\n          day: item.day.split('T')[0],\r\n          code: item.code,\r\n          closeprice: item.closeprice,\r\n          risk: item.risk\r\n        }\r\n      })\r\n      this.drawChartRiskPrediction()\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  },\r\n  methods: {\r\n    // 输入框自动建议\r\n    querySearch(queryString, cb) {\r\n      let commodities = this.commodities;\r\n      let results = queryString ? commodities.filter(this.createFilter(queryString)) : commodities;\r\n      cb(results); // 调用callback返回建议列表的数据\r\n    },\r\n    createFilter(queryString) {\r\n      return (commodity) => {\r\n        return (commodity.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n      }\r\n    },\r\n    handleSelect() {\r\n      this.onClickQuery()\r\n    },\r\n    onClickQuery() {\r\n      getDataRiskChart(this.value).then(res => {\r\n        this.formRisk = res.data.map(item => {\r\n          return {\r\n            id: item.id,\r\n            day: item.day.split('T')[0],\r\n            code: item.code,\r\n            closeprice: item.closeprice,\r\n            risk: item.risk\r\n          }\r\n        })\r\n        this.drawChartRiskPrediction()\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    goBack() {\r\n      history.back();\r\n    },\r\n    drawChartRiskPrediction() {\r\n      let chart = echarts5.init(document.getElementById('chart-risk-prediction'))\r\n      let pieces = []\r\n      for (let i = 0; i < this.formRisk.length;) {\r\n        let j = i + 1;\r\n        if (this.formRisk[i].risk <= 0.333) {\r\n          while (j < this.formRisk.length)\r\n            if (this.formRisk[j].risk <= 0.333)\r\n              j++;\r\n            else\r\n              break;\r\n          pieces.push({gte: i, lt: j, color: 'green'})\r\n        } else if (this.formRisk[i].risk <= 0.666) {\r\n          while (j < this.formRisk.length)\r\n            if (this.formRisk[j].risk <= 0.666 && this.formRisk[j].risk > 0.333)\r\n              j++;\r\n            else\r\n              break;\r\n          pieces.push({gte: i, lt: j, color: 'yellow'})\r\n        } else {\r\n          while (j < this.formRisk.length)\r\n            if (this.formRisk[j].risk > 0.666)\r\n              j++;\r\n            else\r\n              break;\r\n          pieces.push({gte: i, lt: j, color: 'red'})\r\n        }\r\n        i = j;\r\n      }\r\n\r\n      let options = {\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        dataZoom: [\r\n          {\r\n            type: 'slider',\r\n            start: 95,\r\n            minSpan: 1\r\n          },\r\n          {\r\n            type: 'inside'\r\n          }\r\n        ],\r\n        visualMap: {\r\n          dimension: 0,\r\n          pieces: pieces,\r\n          outOfRange: {\r\n            color: 'grey'\r\n          },\r\n          show: false\r\n        },\r\n        xAxis: {\r\n          data: this.formRisk.map(item => {\r\n            return item.day\r\n          })\r\n        },\r\n        yAxis: {\r\n          scale: true\r\n        },\r\n        series: [\r\n          {\r\n            type: 'line',\r\n            symbol: 'circle',\r\n            smooth: true,\r\n            data: this.formRisk.map(item => {\r\n              return item.closeprice\r\n            })\r\n          }\r\n        ]\r\n      };\r\n\r\n      chart.setOption(options);\r\n\r\n    },\r\n    onClickQueryRelation() {\r\n      let URL = \"/getcommodityRelationdetails/\" + this.value;\r\n      getcommodityRelationdetails2(URL).then(res => {\r\n        this.formRelation = res.data.map(item => {\r\n          return {\r\n            name: item.name2,\r\n            similarity: item.similarity\r\n          }\r\n        })\r\n        this.dialogFormVisible = true;\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    onClickRelatedCommodity(name) {\r\n      this.value = name\r\n      this.dialogFormVisible = false\r\n      this.drawChartRiskPrediction()\r\n    },\r\n    loadAll() {\r\n      return [{\"value\": '锡'},\r\n        {\"value\": '锌'},\r\n        {\"value\": '铜'},\r\n        {\"value\": '铅'},\r\n        {\"value\": '镍'},\r\n        {\"value\": '铝'},\r\n        {\"value\": '白银99.99'},\r\n        {\"value\": '黄金99.99'},\r\n        {\"value\": '螺纹钢'},\r\n        {\"value\": '原油（中）'},\r\n        {\"value\": '聚乙烯'},\r\n        {\"value\": '天然橡胶（TSR20）'},\r\n        {\"value\": '尿素硝酸铵'},\r\n        {\"value\": '甲醇'},\r\n        {\"value\": '天然气'},\r\n        {\"value\": '动力煤'},\r\n        {\"value\": '焦煤'},\r\n        {\"value\": '铁矿石'},\r\n        {\"value\": '焦炭'},\r\n        {\"value\": '可可'},\r\n        {\"value\": '鸡蛋'},\r\n        {\"value\": '活猪'},\r\n        {\"value\": '豆粕'},\r\n        {\"value\": '豆油'},\r\n        {\"value\": '早籼稻'},\r\n        {\"value\": '油菜籽'},\r\n        {\"value\": '棉花一号'},\r\n        {\"value\": '菜籽油'},\r\n        {\"value\": '菜籽粕'},\r\n        {\"value\": '白糖'},\r\n        {\"value\": '大豆'},\r\n        {\"value\": '玉米'},\r\n        {\"value\": '小麦'},\r\n        {\"value\": '强筋小麦'}]\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPageNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPageNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./riskPageNew.vue?vue&type=template&id=da549642&scoped=true&\"\nimport script from \"./riskPageNew.vue?vue&type=script&lang=js&\"\nexport * from \"./riskPageNew.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da549642\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}