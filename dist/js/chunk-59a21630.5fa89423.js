(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59a21630"],{"09ea":function(t,e,o){"use strict";o.d(e,"F",(function(){return r})),o.d(e,"H",(function(){return i})),o.d(e,"o",(function(){return l})),o.d(e,"E",(function(){return c})),o.d(e,"k",(function(){return a})),o.d(e,"f",(function(){return u})),o.d(e,"g",(function(){return s})),o.d(e,"h",(function(){return d})),o.d(e,"G",(function(){return m})),o.d(e,"I",(function(){return f})),o.d(e,"m",(function(){return g})),o.d(e,"p",(function(){return h})),o.d(e,"u",(function(){return p})),o.d(e,"a",(function(){return y})),o.d(e,"i",(function(){return b})),o.d(e,"B",(function(){return k})),o.d(e,"e",(function(){return v})),o.d(e,"j",(function(){return O})),o.d(e,"t",(function(){return R})),o.d(e,"A",(function(){return j})),o.d(e,"v",(function(){return w})),o.d(e,"w",(function(){return C})),o.d(e,"d",(function(){return S})),o.d(e,"b",(function(){return x})),o.d(e,"y",(function(){return _})),o.d(e,"z",(function(){return T})),o.d(e,"c",(function(){return A})),o.d(e,"x",(function(){return F})),o.d(e,"C",(function(){return V})),o.d(e,"D",(function(){return Q})),o.d(e,"q",(function(){return B})),o.d(e,"s",(function(){return I})),o.d(e,"J",(function(){return q})),o.d(e,"n",(function(){return $})),o.d(e,"r",(function(){return E})),o.d(e,"l",(function(){return L}));var n=o("b775");function r(){return console.log("spaceResult"),Object(n["a"])({url:"/spaceresult",method:"get"})}function i(t){return console.log("发送taskInput请求"),Object(n["a"])({url:"/task",method:"post",data:t})}function l(){return console.log("getReadyQueue"),Object(n["a"])({url:"/getReadyQueue",method:"get"})}function c(){return console.log("/modality"),Object(n["a"])({url:"/modality",method:"get"})}function a(){return console.log("发送/getAllUsers请求"),Object(n["a"])({url:"/getAllUsers",method:"get"})}function u(){return console.log("发送bourseget请求"),Object(n["a"])({url:"/getAllbourse",method:"get"})}function s(t){return console.log("发送/modality请求"),Object(n["a"])({url:"/modality",method:"post",data:t})}function d(){return console.log("发送时间粒度请求"),Object(n["a"])({url:"/getTimeadvise",method:"get"})}function m(){return console.log("发送taskAllocation 请求"),Object(n["a"])({url:"/taskAllocation",method:"get"})}function f(){return console.log("获取taskQuery表格数据"),Object(n["a"])({url:"/task",method:"get"})}function g(t){return console.log("获取getModalityByUserId数据 "),Object(n["a"])({url:t,method:"get"})}function h(t){return console.log("获取getRolenameById数据 "),Object(n["a"])({url:t,method:"get"})}function p(){return console.log("获取商品信息表格数据！！！"),Object(n["a"])({url:"/getcommodityInfomation",method:"get"})}function y(t){return console.log("添加商品信息数据！！！"),Object(n["a"])({url:"/addcommodityInfomation",method:"post",data:t})}function b(t){return console.log("删除商品！！！"),Object(n["a"])({url:t,method:"get"})}function k(){return console.log("获取品类表格数据！！！"),Object(n["a"])({url:"/getcommodityVariety",method:"get"})}function v(t){return console.log("添加品类！！！"),Object(n["a"])({url:"/addcommodityVariety",method:"post",data:t})}function O(t){return console.log("删除品类！！！"),Object(n["a"])({url:t,method:"get"})}function R(t){return console.log("根据商品名称 获得商品历史价格信息！！！"),Object(n["a"])({url:t,method:"get"})}function j(){return console.log("获得 商品交易数据集。！！！"),Object(n["a"])({url:"/getcommodityTransaction",method:"get"})}function w(){return console.log("获得 关联商品数据集！！！"),Object(n["a"])({url:"/getcommodityTransaction2",method:"get"})}function C(){return console.log("获得 详细关联商品数据集！！！"),Object(n["a"])({url:"/getcommodityRelationdetails",method:"get"})}function S(t){return console.log("添加商品交易事务数据集。！！！"),Object(n["a"])({url:"/addcommodityTransaction",method:"post",data:t})}function x(){return console.log("计算出关联商品集！！！"),Object(n["a"])({url:"/addcommodityRelationdetails2",method:"get"})}function _(){return console.log("获得 时间粒度集合！！！"),Object(n["a"])({url:"/getcommodityTimeadvise",method:"get"})}function T(t){return console.log("根据商品名称 获得时间粒度！！！"),Object(n["a"])({url:t,method:"get"})}function A(){return console.log("计算时间粒度！！！"),Object(n["a"])({url:"/addcommodityTimeadvise",method:"get"})}function F(t){return console.log("根据商品名称 获得关联商品集合！！！"),Object(n["a"])({url:t,method:"get"})}function V(t){return console.log("发送getplatform请求"),Object(n["a"])({url:t,method:"get"})}function Q(t){return console.log("发送getrecommendrlatform请求"),Object(n["a"])({url:t,method:"get"})}function B(t){return console.log("发送getTeamResult请求"),Object(n["a"])({url:t,method:"get"})}function I(t){return console.log("发送getTeamResultForRS请求"),Object(n["a"])({url:t,method:"get"})}function q(t){return console.log("追加商品粒度"),Object(n["a"])({url:"/taskDecomposition",method:"post",data:t})}function $(t){return console.log("发送getOneTeamResult请求"),Object(n["a"])({url:t,method:"get"})}function E(t){return console.log("发送getTeamResultByRName请求"),Object(n["a"])({url:t,method:"get"})}function L(){return console.log("发送getComparisonResults请求"),Object(n["a"])({url:"/getComparisonResults",method:"get"})}},5069:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h2",[t._v("大宗商品价格波动态势演化")]),o("el-form",{attrs:{inline:!0}},[o("el-form-item",[o("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入查询商品"},on:{select:t.handleSelect},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onClickQuery}},[t._v("查询")])],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.goBack}},[t._v("返回")])],1)],1),t._e(),o("div",{staticStyle:{width:"93%",height:"480px","margin-left":"auto","margin-right":"auto",float:"left",display:"inline-block"},attrs:{id:"chart-risk-prediction"}}),t._m(0),o("el-button",{staticStyle:{"margin-top":"2rem"},attrs:{type:"primary"},on:{click:t.onClickQueryRelation}},[t._v("查询关联商品")]),o("el-dialog",{attrs:{visible:t.dialogFormVisible,width:"30%",title:t.value+"关联商品",center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-table",{attrs:{data:t.formRelation,"default-sort":{prop:"similarity",order:"descending"},stripe:""}},[o("el-table-column",{attrs:{prop:"name",label:"关联商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(o){return t.onClickRelatedCommodity(e.row.name)}}},[t._v(t._s(e.row.name))])]}}])}),o("el-table-column",{attrs:{prop:"similarity",label:"相关度",sortable:""}})],1)],1)],1)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-left":"auto","margin-right":"auto","padding-top":"10px",width:"50px",display:"inline-block"}},[o("p",{staticStyle:{"text-align":"center",width:"50px",float:"left","font-size":"14px"}},[t._v("高")]),o("canvas",{staticStyle:{float:"left","margin-left":"auto","margin-right":"auto"},attrs:{id:"legend",width:"50",height:"380"}}),o("p",{staticStyle:{"text-align":"center",width:"50px",float:"left","font-size":"14px"}},[t._v("低")])])}],i=(o("4de4"),o("c975"),o("d81d"),o("ac1f"),o("1276"),o("09ea")),l=o("9cd1"),c=o("a32d"),a={name:"riskPageNew",data:function(){return{value:"小麦",options:[],formRisk:[],formRelation:[],commodities:[],dialogFormVisible:!1,row:"暂无",divVisible:!1,chart:{}}},created:function(){},mounted:function(){var t=this;console.log(this.$route.query),this.$route.query&&this.$route.query.data?(this.divVisible=!0,this.row=this.$route.query.data.info):this.divVisible=!1,this.commodities=this.loadAll();var e=this.$store.state.commodityForMonitoring;e&&(this.value=e),Object(c["a"])(this.value).then((function(e){t.formRisk=e.data.map((function(t){return{id:t.id,day:t.day.split("T")[0],code:t.code,closeprice:t.closeprice,risk:t.risk}})),t.chart=l["a"](document.getElementById("chart-risk-prediction")),t.drawChartRiskPrediction(),t.drawLegend()})).catch((function(t){console.log(t)}))},methods:{isAvailable:function(t){for(var e in this.commodities)if(this.commodities[e].value===t)return!0;return!1},dealWithColor:function(t){return"高风险"===t||"中风险"===t||"低风险"===t?{color:"#2f2f2f"}:void 0},drawLegend:function(){var t=document.getElementById("legend"),e=t.getContext("2d"),o=e.createLinearGradient(0,0,0,400);o.addColorStop(0,"red"),o.addColorStop(.3,"orange"),o.addColorStop(.6,"yellow"),o.addColorStop(1,"green"),e.fillStyle=o,e.fillRect(5,0,40,400)},querySearch:function(t,e){var o=this.commodities,n=t?o.filter(this.createFilter(t)):o;e(n)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(){this.onClickQuery()},goBack:function(){history.back()},drawChartRiskPrediction:function(){for(var t=[],e=0;e<this.formRisk.length;){var o=e+1;if(this.formRisk[e].risk<=.333){while(o<this.formRisk.length){if(!(this.formRisk[o].risk<=.333))break;o++}t.push({gte:e,lt:o,color:"green"})}else if(this.formRisk[e].risk<=.666){while(o<this.formRisk.length){if(!(this.formRisk[o].risk<=.666&&this.formRisk[o].risk>.333))break;o++}t.push({gte:e,lt:o,color:"yellow"})}else{while(o<this.formRisk.length){if(!(this.formRisk[o].risk>.666))break;o++}t.push({gte:e,lt:o,color:"red"})}e=o}var n={tooltip:{trigger:"axis"},dataZoom:[{type:"slider",start:95,minSpan:1},{type:"inside"}],visualMap:{dimension:0,pieces:t,outOfRange:{color:"grey"},show:!1},xAxis:{data:this.formRisk.map((function(t){return t.day}))},yAxis:{scale:!0},series:[{type:"line",symbol:"circle",smooth:!0,data:this.formRisk.map((function(t){return t.closeprice}))}]};this.chart.setOption(n)},onClickQuery:function(){var t=this;Object(c["a"])(this.value).then((function(e){t.formRisk=e.data.map((function(t){return{id:t.id,day:t.day.split("T")[0],code:t.code,closeprice:t.closeprice,risk:t.risk}})),t.drawChartRiskPrediction()})).catch((function(t){console.log(t)}))},onClickQueryRelation:function(){var t=this,e="/getcommodityRelationdetails/"+this.value;this.formRelation=[],Object(i["x"])(e).then((function(e){e.data.map((function(e){t.isAvailable(e.name2)&&t.formRelation.push({name:e.name2,similarity:e.similarity})})),t.dialogFormVisible=!0})).catch((function(t){console.log(t)}))},onClickRelatedCommodity:function(t){this.value=t,this.dialogFormVisible=!1,this.onClickQuery()},loadAll:function(){return[{value:"螺纹钢"},{value:"天然橡胶（TSR20）"},{value:"铁矿石"},{value:"棉花一号"},{value:"菜籽油"},{value:"菜籽粕"},{value:"白糖"},{value:"玉米"},{value:"小麦"}]}}},u=a,s=o("2877"),d=Object(s["a"])(u,n,r,!1,null,"1fd46428",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-59a21630.5fa89423.js.map