(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e31190f"],{7355:function(e,t,o){},acc7:function(e,t,o){"use strict";var l=o("7355"),i=o.n(l);i.a},b4e81:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v("大宗商品价格波动预警监控平台")]),o("el-container",{staticStyle:{height:"650px",border:"10px solid #eee"}},[o("el-aside",{staticStyle:{border:"10px solid #eee","background-color":"white"},attrs:{width:"370px"}},[o("div",{staticStyle:{"margin-top":"1rem",width:"350px",height:"500px"},attrs:{id:"chart-risk-frequency"}})]),o("el-container",{staticStyle:{border:"10px solid #eee"}},[o("el-header",[o("h4",[e._v("预警信息综合显示")])]),o("el-tabs",{staticStyle:{width:"100%",height:"100%"},attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.tabSelected,callback:function(t){e.tabSelected=t},expression:"tabSelected"}},[o("el-tab-pane",{attrs:{label:"已发布"}},[o("el-table",{attrs:{data:e.formReleased}},[o("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"30"}}),o("el-table-column",{attrs:{prop:"goods",label:"商品","min-width":"50"}}),o("el-table-column",{attrs:{prop:"info",label:"预警信息","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return["高"===t.row.info?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.info))]):"低"===t.row.info?o("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.info))]):"中"===t.row.info?o("span",{staticStyle:{color:"orange"}},[e._v(e._s(t.row.info))]):e._e()]}}])}),o("el-table-column",{attrs:{prop:"time",label:"发布时间","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.time.split(".")[0].replace("T"," ")))])]}}])}),o("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticClass:"el-option-in-table",attrs:{type:"text"},on:{click:function(o){return e.goToRiskPage(t.row)}}},[e._v("监控")])]}}])})],1)],1),this.dialogVisible?o("el-tab-pane",{attrs:{label:"待处理"}},[o("el-table",{attrs:{data:e.formReleased}},[o("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"30"}}),o("el-table-column",{attrs:{prop:"goods",label:"商品","min-width":"50"}}),o("el-table-column",{attrs:{prop:"info",label:"预警信息","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return["高"===t.row.info?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.info))]):"低"===t.row.info?o("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.info))]):"中"===t.row.info?o("span",{staticStyle:{color:"orange"}},[e._v(e._s(t.row.info))]):e._e()]}}],null,!1,4145335929)}),o("el-table-column",{attrs:{prop:"time",label:"发布时间","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.time.split(".")[0].replace("T"," ")))])]}}],null,!1,1647033965)}),o("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticClass:"el-option-in-table",attrs:{type:"text"},on:{click:function(o){return e.onClickModify(t.row)}}},[e._v("修改")]),o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",title:"是否确定送审？"},on:{onConfirm:function(o){return e.pendInfo(t.row)}}},[o("el-button",{staticClass:"el-option-in-table",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("送审")])],1),o("el-button",{staticClass:"el-option-in-table",attrs:{type:"text"},on:{click:function(o){return e.goToRiskPage(t.row)}}},[e._v("监控")])]}}],null,!1,2995710173)})],1)],1):e._e(),this.dialogVisible?o("el-tab-pane",{attrs:{label:"已修改"}},[o("el-table",{attrs:{data:e.formModified}},[o("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"30"}}),o("el-table-column",{attrs:{prop:"goods",label:"商品","min-width":"50"}}),o("el-table-column",{attrs:{prop:"info",label:"预警信息","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return["高"===t.row.info?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.info))]):"低"===t.row.info?o("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.info))]):"中"===t.row.info?o("span",{staticStyle:{color:"orange"}},[e._v(e._s(t.row.info))]):e._e()]}}],null,!1,4145335929)}),o("el-table-column",{attrs:{prop:"time",label:"发布时间","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.time.split(".")[0].replace("T"," ")))])]}}],null,!1,1647033965)})],1)],1):e._e(),this.dialogVisible?o("el-tab-pane",{attrs:{label:"已送审"}},[o("el-table",{attrs:{data:e.formSent}},[o("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"30"}}),o("el-table-column",{attrs:{prop:"goods",label:"商品","min-width":"50"}}),o("el-table-column",{attrs:{prop:"info",label:"预警信息","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return["高"===t.row.info?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.info))]):"低"===t.row.info?o("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.info))]):"中"===t.row.info?o("span",{staticStyle:{color:"orange"}},[e._v(e._s(t.row.info))]):e._e()]}}],null,!1,4145335929)}),o("el-table-column",{attrs:{prop:"time",label:"发布时间","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.time.split(".")[0].replace("T"," ")))])]}}],null,!1,1647033965)})],1)],1):e._e()],1)],1),o("el-dialog",{attrs:{title:"预警信息修改",visible:e.dialogModifyVisible,"append-to-body":!0,"lock-scroll":!1,width:"30%","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogModifyVisible=t}}},[o("el-form",{attrs:{model:e.formRowSelected}},[o("el-form-item",{attrs:{label:"序号","label-width":"80px"}},[e._v(" "+e._s(e.formRowSelected.id)+" ")]),o("el-form-item",{attrs:{label:"预警信息","label-width":"80px"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formRowSelected.info,callback:function(t){e.$set(e.formRowSelected,"info",t)},expression:"formRowSelected.info"}},[o("el-option",{key:"1",attrs:{label:"高",value:"高"}}),o("el-option",{key:"2",attrs:{label:"中",value:"中"}}),o("el-option",{key:"3",attrs:{label:"低",value:"低"}})],1)],1),o("el-form-item",{attrs:{label:"状态","label-width":"80px"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formRowSelected.status,callback:function(t){e.$set(e.formRowSelected,"status",t)},expression:"formRowSelected.status"}},[o("el-option",{key:"0",attrs:{label:"已发布",value:"0"}}),o("el-option",{key:"1",attrs:{label:"待处理",value:"1"}}),o("el-option",{key:"2",attrs:{label:"已修改",value:"2"}}),o("el-option",{key:"3",attrs:{label:"已送审",value:"3"}}),o("el-option",{key:"4",attrs:{label:"已删除",value:"4"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.modifyInfo}},[e._v("确定")]),o("el-button",{on:{click:function(t){e.dialogModifyVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},i=[],a=(o("c975"),o("9cd1")),n=o("5f87"),s=o("a32d"),r={name:"riskSurveillance",data:function(){return{tabSelected:"",infoSelected:"",formRowSelected:{},tabIndex:["已发布","待处理","已修改","已送审","已删除"],dialogModifyVisible:!1,formReleased:[],formPending:[],formModified:[],formSent:[],formDeleted:[],role:"",dialogVisible:""}},created:function(){this.getRiskInfo(1)},mounted:function(){this.role=Object(n["b"])(),console.log("TPS"==this.role),"TPS"==this.role?this.dialogVisible=!1:this.dialogVisible=!0,this.drawChartRiskFrequency()},methods:{handleTabClick:function(e){console.log(e.label);var t=-1;console.log(0==this.tabIndex.indexOf(e.label)),0==this.tabIndex.indexOf(e.label)&&(t=1),1==this.tabIndex.indexOf(e.label)&&(t=0),0!=t&&1!=t&&(t=this.tabIndex.indexOf(e.label)),this.getRiskInfo(t)},getRiskInfo:function(e){var t=this;Object(s["c"])(e).then((function(o){switch(e){case 0:t.formReleased=t.dealwithid(o.data);break;case 1:t.formReleased=t.dealwithid(o.data);break;case 2:t.formModified=t.dealwithid(o.data);break;case 3:t.formSent=t.dealwithid(o.data);break;case 4:t.formDeleted=t.dealwithid(o.data);break;default:break}}))},dealwithid:function(e){e.sort((function(e,t){var o=e.id,l=t.id;return o>l?1:o<l?-1:0}));for(var t=0;t<e.length;t++)"高风险"===e[t].info&&(e[t].info="高"),"中风险"===e[t].info&&(e[t].info="中"),"低风险"===e[t].info&&(e[t].info="低");return e},onClickModify:function(e){this.formRowSelected={id:e.id,info:e.info,status:0===e.status?"已发布":e.status},this.infoSelected=e.info,this.dialogModifyVisible=!0},modifyInfo:function(){var e=this;if("已发布"===this.formRowSelected.status){if(this.formRowSelected.status=0,this.infoSelected===this.formRowSelected.info)return void(this.dialogModifyVisible=!1);this.formRowSelected.status=2}Object(s["f"])(this.formRowSelected).then((function(){e.$message({message:"修改成功",type:"success"}),e.getRiskInfo(1)})).catch((function(){e.$message({message:"修改失败",type:"error"})})),this.dialogModifyVisible=!1},pendInfo:function(e){var t=this,o={id:e.id,info:e.info,status:3};Object(s["f"])(o).then((function(){t.$message({message:"送审成功",type:"success"}),t.getRiskInfo(1)})).catch((function(){t.$message({message:"送审失败",type:"error"})}))},deleteInfo:function(e){var t=this,o={id:e.id,info:e.info,status:4};Object(s["f"])(o).then((function(){t.$message({message:"删除成功",type:"success"}),t.getRiskInfo(1)})).catch((function(){t.$message({message:"删除失败",type:"error"})}))},goToFirst:function(){this.$router.push("/trade/dashboard")},goToRiskPage:function(e){this.$store.commit("setCommodityForMonitoring",e.goods),this.$router.push({path:"/trade/riskPrediction/riskPage",query:{data:e}})},drawChartRiskFrequency:function(){var e=a["a"](document.getElementById("chart-risk-frequency")),t={title:{text:"当月预警次数",left:"center"},tooltip:{show:!0},grid:{containLabel:!0},xAxis:{min:0,max:30,axisLabel:{show:!0,textStyle:{color:"#000",fontSize:"16"}},axisLine:{show:!0,lineStyle:{color:"#000",width:3}}},yAxis:{type:"category",data:["棉花","大豆","玉米","小麦"]},visualMap:{orient:"horizontal",left:"center",min:0,max:15,text:["高","低"],dimension:0,inRange:{color:["#008000","#FFD700","#FF0000"]}},series:[{type:"bar",barWidth:"40px",data:[2,9,12,15]}]};e.setOption(t)}}},c=r,d=(o("acc7"),o("2877")),f=Object(d["a"])(c,l,i,!1,null,"a365e28c",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2e31190f.7d332bb0.js.map