(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dfc0c0f"],{"22b5":function(t,e,i){"use strict";var a=i("cc93"),s=i.n(a);s.a},cc93:function(t,e,i){},fc15:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("el-button",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{type:"primary"},on:{click:t.createTaskSource}},[t._v("修改任务来源")])],1),i("div",{staticClass:"task-input-box"},[i("el-form",{attrs:{"label-width":"130px",id:"selectForm"}},[i("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"任务来源"}},[i("el-col",{attrs:{span:1}},[i("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.radio)+" ")])],1)],1),i("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"商品种类"}},[i("el-col",{attrs:{span:13}},[i("el-input",{attrs:{placeholder:"请输入内容"},on:{change:t.handleChange},model:{value:t.commodityName,callback:function(e){t.commodityName=e},expression:"commodityName"}})],1)],1),i("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"交易平台"}},[i("el-col",{attrs:{span:13}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择平台名称"},model:{value:t.flatName,callback:function(e){t.flatName=e},expression:"flatName"}},t._l(t.flatList,(function(e,a){return i("el-option",{key:a,attrs:{label:e.flatName,value:e.flatName},on:{change:t.handleChange}})})),1)],1)],1),i("el-form-item",{staticStyle:{"margin-left":"300px"},attrs:{label:"交易风险类型"}},[i("el-col",{attrs:{span:13}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择交易风险类型"},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}},[i("el-option",{attrs:{label:"交易主体异常",value:"交易主体异常"}}),i("el-option",{attrs:{label:"仓单异常",value:"仓单异常"}}),i("el-option",{attrs:{label:"融资异常",value:"融资异常"}}),i("el-option",{attrs:{label:"质押权异常",value:"质押权异常"}})],1)],1)],1),i("el-button",{attrs:{type:"success"},on:{click:t.createTask}},[t._v("立即创建")]),i("el-button",{attrs:{type:"info"},on:{click:t.abortForm}},[t._v("取消创建")])],1)],1),i("el-dialog",{attrs:{title:"请选择任务来源",visible:t.formTaskVisible,width:"60%"},on:{"update:visible":function(e){t.formTaskVisible=e}}},[i("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("el-radio",{attrs:{label:"主体智能查验"}},[t._v("主体智能查验")]),i("el-radio",{attrs:{label:"交易过程监测"}},[t._v("交易过程监测")]),i("el-radio",{attrs:{label:"交易风险智能分析与预警"}},[t._v("交易风险智能分析与预警")])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.InputTaskSourceTrue}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"确认创建任务",visible:t.formDialogVisible,width:"50%"},on:{"update:visible":function(e){t.formDialogVisible=e}}},[i("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"任务来源"}},[i("el-col",[i("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.radio)+" ")])],1)],1),i("el-form-item",{attrs:{label:"商品种类"}},[i("el-col",[i("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.commodityName)+" ")])],1)],1),i("el-form-item",{attrs:{label:"交易平台"}},[i("el-col",[i("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.flatName)+" ")])],1)],1),i("el-form-item",{attrs:{label:"交易风险类型"}},[i("el-col",[i("el-tag",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.taskType)+" ")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.formDialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.formDialogTrue}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:t.dialogActiveVisible,title:"主动监管名单",width:"40%",center:""},on:{"update:visible":function(e){t.dialogActiveVisible=e}}},[i("p",{staticStyle:{"font-size":"1rem"}},[t._v(" 平台风险值： "),"高"===t.valueMean?i("span",{staticStyle:{"margin-right":"1rem",color:"red"}},[t._v(t._s(t.valueRisk))]):"中"===t.valueMean?i("span",{staticStyle:{"margin-right":"1rem",color:"orange"}},[t._v(t._s(t.valueRisk))]):"低"===t.valueMean?i("span",{staticStyle:{"margin-right":"1rem",color:"green"}},[t._v(t._s(t.valueRisk))]):t._e(),t._v(" 风险程度： "),"高"===t.valueMean?i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.valueMean))]):"中"===t.valueMean?i("span",{staticStyle:{color:"orange"}},[t._v(t._s(t.valueMean))]):"低"===t.valueMean?i("span",{staticStyle:{color:"green"}},[t._v(t._s(t.valueMean))]):t._e()]),i("el-table",{attrs:{data:t.formActiveList,"default-sort":{prop:"p",order:"descending"},stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"主体"}}),i("el-table-column",{attrs:{prop:"p",label:"异常值",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(parseFloat(e.row.p).toFixed(3)))])]}}])})],1)],1)],1)},s=[],o=(i("c975"),i("a434"),i("b0c0"),i("a9e3"),i("d3b7"),i("09ea")),n=i("5e05"),l=(i("c0b3"),i("5f87")),c=["a","b","c"],r={data:function(){return{checkAllCommodity:!1,checkedCommodity:["a"],isIndeterminateCommodity:!0,commodities:c,isCommodity:!1,commodityName:"",flatList:[],flatName:"",taskType:"",isIndeterminate:!1,taskinputt:this.taskin,input:"",priority:"",humanUse:!1,dateStart:"",dateStart2:"",dateEnd:"",dateEnd2:"",workingTime:"",deadLine:"",timeAdvise:"",content:this.flatName,tradeUser:!1,formDialogVisible:!1,formTaskVisible:!0,radio:"主体智能查验",showStart:"",showEnd:"",dialogActiveVisible:!1,valueRisk:"",valueMean:"",formActiveList:[]}},props:["taskin"],created:function(){var t=this;"OMS"==Object(l["b"])()||"admin"==Object(l["b"])()?(Object(o["f"])().then((function(e){console.log("这是OMS的任务输入");var i=e.data.data;console.log(i);for(var a=[],s=0;s<i.length;s++)a.push(i[s].bourse);t.cities=a,console.log(a)})).catch((function(){console.log("taskQuery fail")})),this.taskin&&(Object.prototype.hasOwnProperty.call(this.taskin,"changeflag")&&console.log(this.taskin.changeflag),console.log(this.taskin.name),this.input=this.taskin.name,this.priority=this.taskin.priority,this.humanUse=this.taskin.humanUse,this.content=this.taskin.content)):(console.log("去rs的任务输入"),this.$router.push("/trade/Multimodal-multigranularity/stepBar/taskInputForRS"))},computed:{address:function(){return console.log(this.taskin),""}},watch:{"taskin.changeflag":function(){console.log("flag变了"),console.log(this.taskin),this.input=this.taskin.name,this.priority=this.taskin.priority?this.taskin.priority:1,this.commodityName=this.taskin.commodityName,this.workingTime=this.taskin.workingTime,this.deadLine=this.taskin.deadLine,this.humanUse=this.taskin.humanUse,this.content=this.taskin.content,this.content||(this.content="暂时未分配"),"是"==this.taskin.humanUse&&(this.humanUse=1),"否"==this.taskin.humanUse&&(this.humanUse=0),this.taskin.changeflag==Number.POSITIVE_INFINITY&&this.cleanForm();var t=document.getElementById("neirong");console.log(t.text)}},methods:{handleChange:function(t){this.getFlatList()},handleCloseCommodityTag:function(t){this.commodityTags.splice(this.commodityTags.indexOf(t),1)},setFlatList:function(t){for(var e=0;e<t.length;e++){var i={};i.flatName=t[e],this.flatList.push(i)}},getFlatList:function(){var t,e=this,i="/getplatform?commodity="+this.commodityName;Object(o["C"])(i).then((function(i){t=i.data.data,e.setFlatList(t),console.log(e.flatList)})).catch((function(t){console.log(t)}))},setFlats:function(t){for(var e=0;e<t.length;e++){var i={};i.flat_name=t[e].platform,i.flat_num=t[e].association,this.flatData.push(i)}},formDialogTrue:function(){this.postData(),this.formDialogVisible=!1,this.$message({message:"恭喜你，任务提交成功",type:"success"})},InputTaskSourceTrue:function(){this.formTaskVisible=!1,this.$message({message:"恭喜你，任务来源选择成功",type:"success"})},handleCloseFlatTag:function(t){this.flatTags.splice(this.flatTags.indexOf(t),1)},handleCheckAllChange:function(t){this.checkedCities=t?this.cities:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){console.log(this.checkedCities);var e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=e>0&&e<this.cities.length},setTimeRecommend:function(t){var e=parseInt(t),i=new Date,a=new Date;this.dateEnd=i,a.setDate(a.getDate()-e),this.dateStart=a},getTimeRecommend:function(){var t=this,e=this.commodityName;console.log("时间粒度 获得商品：",e);var i,a="/getcommodityTimeadvise2/"+e;Object(o["z"])(a).then((function(a){var s=[];s=a.data,i=s[0].timeadvise,console.log("result----111:",i),t.timeAdvise=i;var o=e+"推荐时间粒度为："+i+"天";t.$message({message:o,type:"success"}),t.setTimeRecommend(i)})).catch((function(t){console.log(t)}))},having:function(){return console.log(this.taskin),""!=this.taskin.id},createTask:function(){this.formDialogVisible=!0},createTaskSource:function(){this.formTaskVisible=!0},postAddress:function(){var t=this;this.$confirm("是否确认创建该监管任务","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e="",i=0;i<t.checkedCities.length;i++)0==i&&(e+=t.checkedCities[i]),i>0&&(e+=","+t.checkedCities[i]);console.log(e),console.log("111"),t.content=e,t.postData(),t.$parent.$parent.reloadPage()})).catch((function(){console.log(t.checkedCities.length);for(var e="",i=0;i<t.checkedCities.length;i++)0==i&&(e+=t.checkedCities[i]),i>0&&(e+=","+t.checkedCities[i]);console.log(e)})),this.$parent.$parent.dialogTableVisible=!1},postData:function(){var t=this;console.log("发送请求前");var e=new Date(this.dateStart2).getTime(),i=new Date(this.dateEnd2).getTime(),a=parseInt((new Date).getTime()/1e3),s=new Date(1e3*a),n=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),l=this.flatName+"-"+this.commodityName+"-"+this.taskType+"("+n+")";console.log("elementui 时间形式"+e+"时间2："+i),console.log("humanuse:"+this.humanUse),console.log("taskName:"+l),console.log((new Date).getTime());var c=1==this.humanUse?1:0,r={name:l,priority:this.priority,startTime:1587807522386,endTime:1588404415698,humanUse:c,workingTime:36e5*this.workingTime,deadLine:new Date(this.deadLine).getTime(),timeadvise:this.timeAdvise,tradeuser:this.tradeUser,content:this.flatName,commodityName:this.commodityName};console.log(r),Object(o["H"])(r).then((function(e){t.$router.push("/trade/Multimodal-multigranularity/stepBar/taskQueryTableView").then((function(){console.log("aaa"),t.$parent.$children[0].active=1,t.$store.commit("setStepbarPosition",1),console.log("ccc")}))})).catch((function(t){console.log(t)}))},goto:function(t){return new Promise((function(e,i){this.$router.push(t)}))},abortForm:function(){console.log("zhioiiiiiii"),this.cleanForm(),this.$parent.$parent.dialogTableVisible=!1},cleanForm:function(){console.log("到这里了吗"),this.input="",this.priority="",this.humanUse=!1,this.tradeUser=!1,this.dateStart="",this.dateStart2="",this.dateEnd="",this.dateEnd2="",this.workingTime="",this.deadLine=""},getActiveList:function(){var t=this;Object(n["d"])(this.commodityName,this.flatName).then((function(e){t.valueRisk=e.data.data[0][0].riskvalue,t.valueMean=e.data.data[0][0].riskmean,t.formActiveList=e.data.data[1]})),this.dialogActiveVisible=!0}}},m=r,h=(i("22b5"),i("2877")),d=Object(h["a"])(m,a,s,!1,null,"76372c12",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7dfc0c0f.b0f084d9.js.map