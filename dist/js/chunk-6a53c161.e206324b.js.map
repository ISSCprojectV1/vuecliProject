{"version":3,"sources":["webpack:///./src/components/part1/riskPrediction/riskPrediction.vue?2065","webpack:///src/components/part1/riskPrediction/riskPrediction.vue","webpack:///./src/components/part1/riskPrediction/riskPrediction.vue?fd78","webpack:///./src/components/part1/riskPrediction/riskPrediction.vue","webpack:///./src/api/part1/riskPrediction.js","webpack:///./src/components/part1/riskPrediction/riskPrediction.vue?7f82"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","staticClass","staticRenderFns","component","getriskHistoryData","console","log","request","url","method","param","t","Date","getriskPredictionData","getVarDiff","getVarVolatility","getVarPredictVol","updateRiskInfo","data","getRiskInfoByStatus","status","getDataRiskChart"],"mappings":"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","file":"js/chunk-6a53c161.e206324b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"id\":\"index\",\"element-loading-text\":\"拼命加载中\"}},[_c('div',{staticClass:\"box\",attrs:{\"id\":\"main\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n     <div id=\"index\" v-loading=\"loading\" element-loading-text=\"拼命加载中\">\r\n        <div id=\"main\" class=\"box\"></div>\r\n    </div>\r\n</template>\r\n<script>\r\n //   import axios from \"axios\";\r\n    import echarts from 'echarts'\r\n    import {getriskHistoryData,getriskPredictionData} from \"@/api/part1/riskPrediction\";\r\n    export default {\r\n        name: \"app\",\r\n        data() {\r\n            return {\r\n                itemList: [],\r\n                loading:true\r\n            }\r\n        },\r\n      mounted() {\r\n        let tiankong= document.getElementById(\"index\");\r\n        tiankong.style.height=window.innerHeight+\"px\"\r\n\r\n        console.log(tiankong.style.height)\r\n        let announcement=document.getElementById(\"announcement\");\r\n        console.log(tiankong)\r\n      },\r\n        created() {\r\n            this.getData();\r\n        },\r\n        methods: {\r\n            getData() {\r\n                // 获取历史交易数据\r\n                console.log(\"获取历史数据\")\r\n                getriskHistoryData().then((res) => {\r\n                console.log(\"History json :\"+res.data);\r\n                this.opinionData =res.data;\r\n                console.log(\"获取历史数据成功\")\r\n                }).catch(()=>{\r\n                    console.log(\"getHistoryData fail\")\r\n                });\r\n\r\n                // 获取第二天预测交易数据\r\n                console.log(\"获取预测数据\")\r\n                getriskPredictionData().then((res) => {\r\n                console.log(\"Prediction json :\"+res.data);\r\n                this.predictionData =res.data;\r\n                console.log(\"predictionData 是\"+this.predictionData);\r\n                this.drawLine('main');\r\n                console.log(\"TEXT.VUE--调用axios完成\");\r\n                }).catch(()=>{\r\n                    console.log(\"getPredictionData fail\")\r\n                });\r\n                /*\r\n               axios.get('../../static/json/prediction.json').then(response => {\r\n                    console.log(\"prediction json :\"+response.data);\r\n                    this.predictionData =response.data;\r\n                    console.log(\"predictionData 是\"+this.predictionData);\r\n                    this.drawLine('main');\r\n                    console.log(\"TEXT.VUE--调用axios完成\");\r\n                }, response => {\r\n                    console.log(\"error\");\r\n                });*/\r\n            },\r\n\r\n            drawLine(id){\r\n            this.charts = echarts.init(document.getElementById(id))\r\n            var upColor = '#ec0000';\r\n            var upBorderColor = '#8A0000';\r\n            var downColor = '#00da3c';\r\n            var downBorderColor = '#008F28';\r\n            // 将json文件存入数组\r\n            var values=[];\r\n            values = this.opinionData;\r\n            var predictionVAL = [];\r\n            var predictionDate = [];\r\n            for(let i=0; i<this.predictionData.length;i++){\r\n                predictionVAL.push(this.predictionData[i].closeprice);\r\n                predictionDate.push(this.predictionData[i].day.split('T')[0]);\r\n            }\r\n            var cataData = [];// 储存读入的日期\r\n            var priceData = [];// 存储读入的价格信息\r\n            for(var i= 0;i<values.length;i++){\r\n                cataData.push(values[i].day.split('T')[0]);\r\n                var price=[];\r\n                price.push(values[i].openprice);\r\n                price.push(values[i].closeprice);\r\n                price.push(values[i].highprice);\r\n                price.push(values[i].lowprice);\r\n                priceData.push(price);\r\n            }\r\n            cataData.push.apply(cataData,predictionDate);\r\n            console.log(\"cataData的内容是\" + cataData);\r\n\r\n            function calculateMA(dayCount) {\r\n                    var result = [];\r\n                    for (var i = 0, len = priceData.length; i < len; i++) {\r\n                    if (i < dayCount) {\r\n                    result.push('-');\r\n                    continue;\r\n                      }\r\n                   var sum = 0;\r\n                   for (var j = 0; j < dayCount; j++) {\r\n                   sum += priceData[i - j][1];\r\n                       }\r\n                   result.push(sum / dayCount);\r\n                       }\r\n                console.log(\"result =\" + result);\r\n                  return result;\r\n                       }\r\n            this.charts.setOption({\r\n                title: {\r\n                       text: '风\\n险\\n预\\n测',\r\n                       textStyle:{\r\n                           fontSize:30\r\n                       },\r\n                       left:0\r\n                       },\r\n                tooltip: {\r\n                       trigger: 'axis',\r\n                       axisPointer: {\r\n                       type: 'cross'\r\n                        }\r\n                       },\r\n                legend: {\r\n                    data: ['日K', 'PREDICTION',  'MA10', 'MA20']\r\n                },\r\n               xAxis: {\r\n                    type: 'category',\r\n                    data: cataData,\r\n                    scale: true,\r\n                    boundaryGap: false,\r\n                    axisLine: {onZero: false},\r\n                    splitLine: {show: false},\r\n                    splitNumber: 20,\r\n                    min: 'dataMin',\r\n                    max: 'dataMax'\r\n                      },\r\n                yAxis: {\r\n                    scale: true,\r\n                    splitArea: {\r\n                    show: true\r\n                       }\r\n                      },\r\n                dataZoom: [\r\n                      {\r\n                    type: 'inside',\r\n                    start: 50,\r\n                    end: 100\r\n                      },\r\n                      {\r\n                    show: true,\r\n                    type: 'slider',\r\n                    top: '90%',\r\n                    start: 50,\r\n                    end: 100\r\n                      }\r\n                      ],\r\n                series: [{\r\n                    name: '日K',\r\n                    type: 'candlestick',\r\n                    data: priceData,\r\n                    itemStyle: {\r\n                          color: upColor,\r\n                          color0: downColor,\r\n                          borderColor: upBorderColor,\r\n                          borderColor0: downBorderColor\r\n                               },\r\n                    markPoint: {\r\n                            label: {\r\n                           normal: {\r\n                         formatter: function (param) {\r\n                            return param != null ? Math.round(param.value) : '';\r\n                                 }\r\n                                 }\r\n                                },\r\n                        data: [\r\n                          {\r\n                            name: 'XX标点',\r\n                            coord: ['2013/5/31', 2300],\r\n                            value: 2300,\r\n                            itemStyle: {\r\n                            color: 'rgb(41,60,85)'\r\n                            }\r\n                          },\r\n                         {\r\n                            name: 'highest value',\r\n                            type: 'max',\r\n                            valueDim: 'highest'\r\n                         },\r\n                         {\r\n                            name: 'lowest value',\r\n                            type: 'min',\r\n                            valueDim: 'lowest'\r\n                         },\r\n                          {\r\n                          name: 'average value on close',\r\n                          type: 'average',\r\n                          valueDim: 'close'\r\n                          }\r\n                          ],\r\n                     tooltip: {\r\n                     formatter: function (param) {\r\n                          return param.name + '<br>' + (param.data.coord || '');\r\n                         }\r\n                       }\r\n                       },\r\n                },\r\n                     {\r\n                    name: 'PREDICTION',\r\n                    type: 'line',\r\n                    data: calculateMA(5),\r\n                    smooth: true,\r\n                    lineStyle: {\r\n                    opacity: 0.5\r\n                       }\r\n                       },\r\n                    {\r\n                    name: 'MA10',\r\n                    type: 'line',\r\n                    data: calculateMA(10),\r\n                    smooth: true,\r\n                    lineStyle: {\r\n                    opacity: 0.5\r\n                       }\r\n                       },\r\n                        {\r\n                    name: 'MA20',\r\n                    type: 'line',\r\n                    data: calculateMA(20),\r\n                    smooth: true,\r\n                    lineStyle: {\r\n                    opacity: 0.5\r\n                       }\r\n                       },\r\n\r\n                ]\r\n            })\r\n                this.loading = false\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n.index{\r\n  width: 100%;\r\n  height: 600px;\r\n}\r\n.box{\r\n    width: 1000px;\r\n    height: 600px\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPrediction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPrediction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./riskPrediction.vue?vue&type=template&id=77f5948c&\"\nimport script from \"./riskPrediction.vue?vue&type=script&lang=js&\"\nexport * from \"./riskPrediction.vue?vue&type=script&lang=js&\"\nimport style0 from \"./riskPrediction.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\nexport function getriskHistoryData() {\r\n    console.log(\"发送getPredictionData请求\")\r\n    return request({\r\n        url: '/HMM/price/search',\r\n        method: 'get',\r\n        param: {t: new Date()}\r\n    })\r\n}\r\n\r\nexport function getriskPredictionData() {\r\n    console.log(\"发送getPredictionData请求\")\r\n    return request({\r\n        url: '/HMM/nextDay/price',\r\n        method: 'get',\r\n        param: {t: new Date()}\r\n    })\r\n}\r\n\r\nexport function getVarDiff() {\r\n    return request({\r\n        url: '/VaR/diff',\r\n        method: 'get',\r\n    })\r\n}\r\n\r\nexport function getVarVolatility() {\r\n    return request({\r\n        url: '/VaR/volatility',\r\n        method: 'get',\r\n    })\r\n}\r\n\r\nexport function getVarPredictVol() {\r\n    return request({\r\n        url: '/VaR/predictVol',\r\n        method: 'get',\r\n    })\r\n}\r\n\r\n// riskSurveillance start\r\nexport function updateRiskInfo(data) {\r\n    return request({\r\n        method: 'POST',\r\n        data: data,\r\n        url: '/monitor/update'\r\n    })\r\n}\r\n\r\nexport function getRiskInfoByStatus(status) {\r\n    return request({\r\n        method: 'GET',\r\n        url: '/monitor/status/' + status\r\n    })\r\n}\r\n// riskSurveillance end\r\n\r\n// risk chart start\r\nexport function riskAlarmService() {\r\n    return request({\r\n        method: 'GET',\r\n        url: '/risk/alarm'\r\n    })\r\n}\r\n\r\nexport function getDataRiskChart(name) {\r\n    return request({\r\n        method: 'GET',\r\n        url: 'risk/name/' + name\r\n    })\r\n}\r\n// risk chart end","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPrediction.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./riskPrediction.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}