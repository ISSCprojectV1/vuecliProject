(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7394"],{5069:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",[e._v("大宗商品价格波动风险演化")]),i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入查询商品"},on:{select:e.handleSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onClickQuery}},[e._v("查询")])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回")])],1)],1),i("div",{staticStyle:{width:"1000px",height:"500px","margin-left":"auto","margin-right":"auto"},attrs:{id:"chart-risk-prediction"}}),i("el-button",{staticStyle:{"margin-top":"2rem"},attrs:{type:"primary"},on:{click:e.onClickQueryRelation}},[e._v("查询关联商品")]),i("el-dialog",{attrs:{visible:e.dialogFormVisible,width:"30%",title:e.value+"关联商品",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-table",{attrs:{data:e.formRelation,"default-sort":{prop:"similarity",order:"descending"},stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"关联商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(i){return e.onClickRelatedCommodity(t.row.name)}}},[e._v(e._s(t.row.name))])]}}])}),i("el-table-column",{attrs:{prop:"similarity",label:"相关度",sortable:""}})],1)],1)],1)},o=[],l=(i("4de4"),i("c975"),i("d81d"),i("ac1f"),i("1276"),i("09ea")),r=i("9cd1"),n=i("a32d"),s={name:"riskPageNew",data:function(){return{value:"小麦",options:[],formRisk:[],formRelation:[],commodities:[],dialogFormVisible:!1}},created:function(){},mounted:function(){var e=this;this.commodities=this.loadAll();var t=this.$store.state.commodityForMonitoring;t&&(this.value=t),Object(n["a"])(this.value).then((function(t){e.formRisk=t.data.map((function(e){return{id:e.id,day:e.day.split("T")[0],code:e.code,closeprice:e.closeprice,risk:e.risk}})),e.drawChartRiskPrediction()})).catch((function(e){console.log(e)}))},methods:{querySearch:function(e,t){var i=this.commodities,a=e?i.filter(this.createFilter(e)):i;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(){this.onClickQuery()},onClickQuery:function(){var e=this;Object(n["a"])(this.value).then((function(t){e.formRisk=t.data.map((function(e){return{id:e.id,day:e.day.split("T")[0],code:e.code,closeprice:e.closeprice,risk:e.risk}})),e.drawChartRiskPrediction()})).catch((function(e){console.log(e)}))},goBack:function(){history.back()},drawChartRiskPrediction:function(){for(var e=r["a"](document.getElementById("chart-risk-prediction")),t=[],i=0;i<this.formRisk.length;){var a=i+1;if(this.formRisk[i].risk<=.333){while(a<this.formRisk.length){if(!(this.formRisk[a].risk<=.333))break;a++}t.push({gte:i,lt:a,color:"green"})}else if(this.formRisk[i].risk<=.666){while(a<this.formRisk.length){if(!(this.formRisk[a].risk<=.666&&this.formRisk[a].risk>.333))break;a++}t.push({gte:i,lt:a,color:"yellow"})}else{while(a<this.formRisk.length){if(!(this.formRisk[a].risk>.666))break;a++}t.push({gte:i,lt:a,color:"red"})}i=a}var o={tooltip:{trigger:"axis"},dataZoom:[{type:"slider",start:95,minSpan:1},{type:"inside"}],visualMap:{dimension:0,pieces:t,outOfRange:{color:"grey"},show:!1},xAxis:{data:this.formRisk.map((function(e){return e.day}))},yAxis:{scale:!0},series:[{type:"line",symbol:"circle",smooth:!0,data:this.formRisk.map((function(e){return e.closeprice}))}]};e.setOption(o)},onClickQueryRelation:function(){var e=this,t="/getcommodityRelationdetails/"+this.value;Object(l["w"])(t).then((function(t){e.formRelation=t.data.map((function(e){return{name:e.name2,similarity:e.similarity}})),e.dialogFormVisible=!0})).catch((function(e){console.log(e)}))},onClickRelatedCommodity:function(e){this.value=e,this.dialogFormVisible=!1,this.drawChartRiskPrediction()},loadAll:function(){return[{value:"锡"},{value:"锌"},{value:"铜"},{value:"铅"},{value:"镍"},{value:"铝"},{value:"白银99.99"},{value:"黄金99.99"},{value:"螺纹钢"},{value:"原油（中）"},{value:"聚乙烯"},{value:"天然橡胶（TSR20）"},{value:"尿素硝酸铵"},{value:"甲醇"},{value:"天然气"},{value:"动力煤"},{value:"焦煤"},{value:"铁矿石"},{value:"焦炭"},{value:"可可"},{value:"鸡蛋"},{value:"活猪"},{value:"豆粕"},{value:"豆油"},{value:"早籼稻"},{value:"油菜籽"},{value:"棉花一号"},{value:"菜籽油"},{value:"菜籽粕"},{value:"白糖"},{value:"大豆"},{value:"玉米"},{value:"小麦"},{value:"强筋小麦"}]}}},c=s,u=i("2877"),d=Object(u["a"])(c,a,o,!1,null,"da549642",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c7394.4c7fd0b3.js.map