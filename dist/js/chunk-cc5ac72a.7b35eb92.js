(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc5ac72a"],{"138e":function(e,t,n){"use strict";var a=n("f4a9"),o=n.n(a);o.a},"2a8a":function(e,t,n){"use strict";var a=n("5d23"),o=n.n(a);o.a},"431e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAAEnqcwnAAAABGdBTUEAALGPC/xhBQAABHNJREFUSA3NVntMW1UY/917e2lroVtDCRtp5VHQCYowg8zFTMi2zLERSVz4wxeDJWLMNL5jjIlLNCZm+8PHEo0GY+L+ELfoNiMR4xb+cJ0QhIJ2LAHGSjuQx8ZK39z2Xs852iuPu7bLNPFL7jnf953vde75zvcdruN8224g0YVVwCeZgWtxNJa/hfePdMEa3Q2u43yLskqYkTo6brG1ISaFMTjzFdOgPFWjseIQpdHZ+wYeKG3GsLcbihhRBQvy7Jia84JZooLfuQ/RCdJSAjxEVNr2YmjmOOPRgQpTUD0wKt3Awcc80HDycoowF7iMiz4neMKdXOxFRPKrIf1ty0Z+x1/hyHICgdgMNlpK4ZkbZsJaDpkCXYhIAfSMfYzT/Ufw0Kb9yNZbteQz2wPPCeA5EUbRjNDSVchKQjVGDygVqBEtF2qt/Rx6XTZjRa4D2x0vQw4bYc2qgBTQQxSMy8VV3PX1H3jn4EcqTRFNB4qiIBYPIh6XwZM/POT5EQ3Vz2PWP4HtVU/Btr5yhZEkUdW8IYmqM9fxS4sXCmwq5yaRVL+ouCSPnMEtOkgdj9CgyyR6u6UK3gUX8nPKMBe8pB5yquip4xdeaehSr47NXIVqexPJlByWglRgwHMSAozYcWc7zro/w922HZAQRvfIYbq8BsoKyzHqubCCrzrwLbrgc7tQaqnDumwrfvWeQNAfg1m/AW5vDzyzF3C/Yx/6PT+tMJAkdm19BK8feBf1ByqSLDZrZpHTfRJtW76AoOOws7KdZFQYBmMWsg0W3GYwrzCQJLqdp+C62Jck1VndgcohiN4cxyc9T0AnCugb+xY1jiYIIhCO+RGMzS8XTYuv2UFClphSlkGHuJTA5LUhzC6OY/hSD479/BocuVtvaPTFw61r1tbsYMJ/ThUymrIY7po5ARBUR74zox+o62kRUh7/43uQOoR0aZ5Ku6g4D037akh916gSuaYiFFo2p9Jna5MLg5gPTWCz7VHohRzctbEO4/NOhKLXEY2HUGKtwULkCkRej7OjR9PauxmByxNzoLGvOWJqZPrqGCa8I6q9ytt3oa68BR/+8JjKowjNs3vtD2NTfj2hOLZmX1/NComOz2J1mLYhjuNQWbAHw1PfM5lMhif3tuPV/W/jdE8n3jz63A1VNDdAA6NfEnQiT4Lg8czODtLWBLiunMLv092QE6TJLs1C4EXQgGPkrydh0NOF+4obcW7sS9SWNOO3qdRtL6lH5wpHFfrdTpzpTb/hf6JcbkEDVxQZx/qeRSQkoTi3FgY5HyFlCqPeIWwriyIqBWEQTUSTY51wmBTE6sI92HZHKzoHXiKnrfmc0vAEuMddmnwtZsYboMq8wMNk1mNWIg5oAZMBR8E9oKWL5j0FKRHFtH8Ejz/4HkmlOEun+rKDpEeNYcD3DZP5N4eMXnWxiIRoOI51udoPFRpQYCEKvZHUBPIWiUsyjCYR4aBE7gEHY7bI7sHqwG+lClFbpBnTJx15XHOJT7Wq0WqH/yua9AAowtN/AgzBoRwLleJOAAAAAElFTkSuQmCC"},"57be":function(e,t,n){e.exports=n.p+"img/badge1.ccbd60cb.png"},"5d23":function(e,t,n){},6131:function(e,t,n){e.exports=n.p+"img/userprofile.e3875e91.jpg"},"698c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("el-container",[n("el-container",[n("el-main",[n("search-bar",{on:{addFilter:e.addFilter}}),n("filter-bar",{attrs:{addTab:e.addTab},on:{changefilter:e.changefilter}}),n("main-upload",{staticClass:"main",attrs:{filterTab:e.filterChange,addTab:e.addTab}})],1),n("el-aside",[n("profile-bar")],1)],1)],1)],1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"searchBar"},[n("announcement"),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticStyle:{float:"left"}},[n("span",[e._v("分类：")])]),n("div",{staticStyle:{float:"left"}},[n("ul",e._l(e.category,(function(t){return n("li",{key:t.name},[n("el-link",{on:{click:function(n){return e.addFilter(t)}}},[e._v(e._s(t.name))])],1)})),0)])]),n("el-divider"),n("el-col",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchWord,size:"medium"}},[n("el-form-item",{attrs:{label:"关键词："}},[n("el-input",{model:{value:e.searchWord.keyword,callback:function(t){e.$set(e.searchWord,"keyword",t)},expression:"searchWord.keyword"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.onSubmit}},[e._v("搜索")])],1)],1)],1)],1)],1)},s=[],i=(n("b0c0"),n("86fb")),c={name:"searchBar",components:{announcement:i["a"]},data:function(){return{searchWord:{keyword:""},category:[{name:"全部",url:"/download"},{name:"钢铁",url:"/download"},{name:"棉花",url:"/download"},{name:"小麦",url:"/download"},{name:"玉米",url:"/download"},{name:"猪肉",url:"/download"}]}},methods:{onSubmit:function(){console.log("submit")},addFilter:function(e){this.$emit("addFilter",e.name)}}},l=c,u=(n("2a8a"),n("2877")),d=Object(u["a"])(l,r,s,!1,null,"7ce7ede6",null),m=d.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"diceng"}},[e._l(e.resources,(function(t){return n("div",{key:t.id},[0!==t.status?n("el-row",{staticClass:"elrow"},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"mainResource"},[n("h2",[n("router-link",{staticClass:"router-link",attrs:{to:"auction/"+t.id}},[e._v(e._s(t.name))])],1),n("div",{staticClass:"content"},[e._v(e._s(t.description))]),"结束"===t.countdown?n("span",[e._v("拍卖已结束")]):n("span",[2===t.status?n("span",[e._v("距开始：")]):n("span",[e._v("距结束：")]),n("i",{staticClass:"countdown"},[e._v(e._s(t.countdown[0]))]),e._v("天 "),n("i",{staticClass:"countdown"},[e._v(e._s(t.countdown[1]))]),e._v("时 "),n("i",{staticClass:"countdown"},[e._v(e._s(t.countdown[2]))]),e._v("分 "),n("i",{staticClass:"countdown"},[e._v(e._s(t.countdown[3]))]),e._v("秒 ")]),n("br"),n("span",[e._v("开始时间： "+e._s(t.startTime))]),n("span",[e._v("结束时间： "+e._s(t.endTime))])])]),n("el-col",{attrs:{span:6}},[n("br"),n("br"),n("br"),n("br"),n("span",[e._v("状态： ")]),1===t.status?n("span",{staticClass:"statusOngoing"},[e._v("正在进行")]):n("span",{staticClass:"statusUpcoming"},[e._v("未开始")]),n("br"),1===t.status?n("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary"},on:{click:function(n){return e.openDialog(t.id)}}},[e._v("竞拍")]):e._e()],1)],1):e._e()],1)})),n("el-pagination",{ref:"pagination",staticStyle:{"text-align":"center","padding-top":"1rem","padding-bottom":"1rem"},attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.pageChange}}),n("el-dialog",{attrs:{title:e.resource.name,visible:e.dialogFormVisible,width:"25%",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[e._v(" "+e._s(e.resource.description)),n("br"),"结束"===e.resource.countdown?n("span",{staticStyle:{"margin-top":"0.5rem"}},[e._v("拍卖已结束")]):e.resource.countdown?n("span",{staticStyle:{"margin-top":"0.5rem"}},[2===e.resource.status?n("span",[e._v("距开始：")]):n("span",[e._v("距结束：")]),n("i",{staticClass:"countdown"},[e._v(e._s(e.resource.countdown[0]))]),e._v("天 "),n("i",{staticClass:"countdown"},[e._v(e._s(e.resource.countdown[1]))]),e._v("时 "),n("i",{staticClass:"countdown"},[e._v(e._s(e.resource.countdown[2]))]),e._v("分 "),n("i",{staticClass:"countdown"},[e._v(e._s(e.resource.countdown[3]))]),e._v("秒 ")]):e._e(),n("ul",{staticStyle:{"margin-bottom":"20px"}},[n("li",{staticStyle:{display:"inline-block"}},[e._v("开始时间："),n("span",[e._v(e._s(e.resource.startTime))])]),n("br"),n("li",{staticStyle:{display:"inline-block"}},[e._v("结束时间："),n("span",[e._v(e._s(e.resource.endTime))])])]),n("el-form",{attrs:{model:e.form,"label-width":"60px","label-position":"right"}},[n("el-form-item",{attrs:{label:"数据量"}},[n("el-input-number",{attrs:{min:1,step:1},model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}}),e._v(" （单位：MB） ")],1),n("el-form-item",{attrs:{label:"出价"}},[n("el-input-number",{attrs:{min:1,step:1},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" （单位：积分） ")],1),n("div",{attrs:{align:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.bid(e.resource.id,e.form.price,e.form.quantity)}}},[e._v("竞拍")])],1)],1)],1)],2)},g=[],p=(n("a4d3"),n("e01a"),n("d81d"),n("ac1f"),n("5319"),n("1276"),n("bd85"));function h(e,t){var n,a,o,r=null,s=new Date(e),i=new Date(t),c=Date.now(),l=c<s.getTime()?s.getTime()-c:i.getTime()-c;return l<=0?"结束":(n=Math.floor(l/864e5),a=Math.floor(l%864e5/36e5),o=Math.floor(l%36e5/6e4),r=Math.floor(l%6e4/1e3),[n,a,o,r])}var v={name:"mainUpload2",props:["filterTab","addTab"],data:function(){return{state:"all",resources:[],total:0,currentPage:1,form:{quantity:"",price:""},dialogTimer:"",resource:[],dialogFormVisible:!1}},created:function(){this.getAuctions(1)},mounted:function(){var e=this;setInterval((function(){for(var t in e.getAuctions(e.currentPage,10),e.resources){var n=new Date(e.resources[t]["startTime"]),a=new Date(e.resources[t]["endTime"]),o=Date.now(),r=o<n.getTime()?n.getTime()-o:a.getTime()-o;if(r>0){var s=Math.floor(r/864e5),i=Math.floor(r%864e5/36e5),c=Math.floor(r%36e5/6e4),l=Math.floor(r%6e4/1e3);e.resources[t]["countdown"]=[s,i,c,l]}else e.resources[t]["countdown"]="结束"}}),1e3),document.getElementById("diceng").style.height=window.innerHeight},watch:{filterTab:function(){this.resources.reverse()},addTab:function(){this.resources.reverse()}},methods:{getAuctions:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(p["l"])(e,n).then((function(e){t.resources=e.data.list.map((function(e){return{id:e.id,name:e.name,description:e.description,status:e.status,startTime:e.startTime.split(".")[0].replace("T"," "),endTime:e.endTime.split(".")[0].replace("T"," "),countdown:h(e.startTime.split(".")[0].replace("T"," "),e.endTime.split(".")[0].replace("T"," "))}})),t.total=e.data.total})).catch((function(e){console.log(e)}))},openDialog:function(e){var t=this;Object(p["j"])(e).then((function(e){t.resource=e.data,t.resource.startTime&&(t.resource.startTime=t.resource.startTime.split(".")[0].replace("T"," "),t.resource.endTime=t.resource.endTime.split(".")[0].replace("T"," "),t.resource.countdown=h(t.resource.startTime,t.resource.endTime)),t.dialogTimer=setInterval((function(){return t.countdownInDialog()}),1e3),t.dialogFormVisible=!0})).catch((function(e){t.$message({showClose:!0,message:"获取后台数据失败",type:"error"}),console.log(e)}))},countdownInDialog:function(){var e=this;Object(p["j"])(this.resource.id).then((function(t){console.log("status of id "+e.resource.id+": "+t.data.status),e.resource.status=t.data.status})).catch((function(e){console.log(e)}));var t=new Date(this.resource["startTime"]),n=new Date(this.resource["endTime"]),a=Date.now(),o=a<t.getTime()?t.getTime()-a:n.getTime()-a;if(o>0){var r=Math.floor(o/864e5),s=Math.floor(o%864e5/36e5),i=Math.floor(o%36e5/6e4),c=Math.floor(o%6e4/1e3);this.resource["countdown"]=[r,s,i,c]}else this.resource["countdown"]="结束"},closeDialog:function(){clearInterval(this.dialogTimer)},pageChange:function(e){this.currentPage=e,this.getAuctions(e)},bid:function(e,t,n){var a=this;Object(p["e"])(e,t,n).then((function(e){a.$message({showClose:!0,message:"竞价成功",type:"success"}),a.dialogFormVisible=!1})).catch((function(e){a.$message({showClose:!0,message:"竞价失败",type:"error"}),console.log(e)}))}}},b=v,w=(n("138e"),Object(u["a"])(b,f,g,!1,null,"20c19966",null)),_=w.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"1rem","margin-bottom":"1rem"}},[n("span",[e._v("已选条件： ")]),e._l(e.tags,(function(t){return n("el-tag",{key:t.name,staticStyle:{"margin-right":"10px"},attrs:{closable:"",type:"info",effect:"plain"},on:{close:function(n){return e.tagClose(t)}}},[e._v(" "+e._s(t.name)+" ")])}))],2)},y=[],C=(n("c975"),n("a434"),{name:"filterBar",props:["addTab"],watch:{addTab:function(){this.tags.push({name:this.addTab})}},data:function(){return{tags:[{name:"钢铁"},{name:"小麦"}]}},methods:{tagClose:function(e){this.tags.splice(this.tags.indexOf(e),1),this.$emit("changefilter",this.tags),console.log("filterBar:send")}}}),A=C,x=Object(u["a"])(A,T,y,!1,null,"343774c6",null),M=x.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profileBar"},[n("el-row",[n("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[n("img",{staticClass:"img",attrs:{src:e.logoimg}})]),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"grid-content",staticStyle:{"margin-left":"1rem"}},[n("span",[e._v("ID:"+e._s(e.user.id))]),n("p",[e._v("昵称:"+e._s(e.user.name))]),n("p",[e._v("邮箱:"+e._s(e.user.email))]),n("p",[e._v("积分:"+e._s(e.user.score))]),n("p",[e._v("荣誉值:"+e._s(e.user.reputation))])])])],1)],1)},B=[],k=n("6131"),S=n.n(k),O=n("57be"),j=n.n(O),D=n("d80c"),R=n.n(D),F=n("431e"),L=n.n(F),Y=n("fa09"),H={name:"profileBar",created:function(){var e=this;Object(Y["v"])().then((function(t){var n=t.data.data;e.user.id=n.id,e.user.name=n.name,e.user.score=n.score,e.user.email=n.email,e.user.reputation=n.reputation,console.log(n)})).catch((function(){console.log("getuserinfo fail")}))},data:function(){return{logoimg:S.a,badge1:j.a,badge3:R.a,down1:L.a,owner:{name:"AS-LLX",score:75},user:{id:"",name:"",score:"",email:""}}}},P=H,W=(n("c375"),Object(u["a"])(P,E,B,!1,null,"71d13005",null)),q=W.exports,z={name:"index",components:{mainUpload:_,searchBar:m,filterBar:M,profileBar:q},mounted:function(){var e=document.getElementById("main");e.style.height=window.innerHeight+"px",console.log(e.style.height)},data:function(){return{filterTab:"test",addTab:""}},methods:{changefilter:function(){console.log("parent:get"),this.filterTab="sucess"},addFilter:function(e){this.addTab=e}},computed:{filterChange:function(){return this.filterTab}}},I=z,N=(n("d531"),Object(u["a"])(I,a,o,!1,null,"21b946dd",null));t["default"]=N.exports},"86fb":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"announcement"},[n("span",{staticClass:"announcement"},[n("i",{staticClass:"el-icon-bell"}),e._v(" "),n("a",{attrs:{href:"/notification"}},[e._v("公告：《拍卖规则》")])])])}],r={name:"announcement"},s=r,i=(n("9eaf"),n("2877")),c=Object(i["a"])(s,a,o,!1,null,"1511e955",null);t["a"]=c.exports},"9c14":function(e,t,n){},"9eaf":function(e,t,n){"use strict";var a=n("f983"),o=n.n(a);o.a},a434:function(e,t,n){"use strict";var a=n("23e7"),o=n("23cb"),r=n("a691"),s=n("50c4"),i=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),m=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var n,a,u,d,m,f,b=i(this),w=s(b.length),_=o(e,w),T=arguments.length;if(0===T?n=a=0:1===T?(n=0,a=w-_):(n=T-2,a=p(g(r(t),0),w-_)),w+n-a>h)throw TypeError(v);for(u=c(b,a),d=0;d<a;d++)m=_+d,m in b&&l(u,d,b[m]);if(u.length=a,n<a){for(d=_;d<w-a;d++)m=d+a,f=d+n,m in b?b[f]=b[m]:delete b[f];for(d=w;d>w-a+n;d--)delete b[d-1]}else if(n>a)for(d=w-a;d>_;d--)m=d+a-1,f=d+n-1,m in b?b[f]=b[m]:delete b[f];for(d=0;d<n;d++)b[d+_]=arguments[d+2];return b.length=w-a+n,u}})},c375:function(e,t,n){"use strict";var a=n("9c14"),o=n.n(a);o.a},d531:function(e,t,n){"use strict";var a=n("e75c"),o=n.n(a);o.a},d80c:function(e,t,n){e.exports=n.p+"img/badge3.46f2c0ac.png"},e75c:function(e,t,n){},f4a9:function(e,t,n){},f983:function(e,t,n){}}]);
//# sourceMappingURL=chunk-cc5ac72a.7b35eb92.js.map