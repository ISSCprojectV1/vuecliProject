(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f7c6d55"],{"0661":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return r}));var l=a("b775");a("bc3a");function n(){return console.log("获取getshengshiApi表格数据 步骤二 发送taskQuery请求 "),Object(l["a"])({url:"/HMM/getShengshi",method:"get"})}function o(){return console.log("获取getAllWhiteApi表格数据 步骤二 发送getAllWhiteApi请求 "),Object(l["a"])({url:"/HMM/getAllWhite",method:"get"})}function i(){return console.log("获取getTaskApi数据"),Object(l["a"])({url:"/task",method:"get"})}function s(e){return console.log("发送postTaskDecompositionApi请求"),Object(l["a"])({url:"/taskDecompositionInput",method:"post",data:e})}function r(){return console.log("发送getbendiApi请求"),Object(l["a"])({url:"/hantina/getbendi",method:"get"})}},8237:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"800px"}},[a("h2",{staticClass:"red"},[e._v(" 监管与服务任务 ")]),a("div",{staticClass:"block",staticStyle:{height:"80px","text-align":"left"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"监管与服务地区"}},[a("el-select",{attrs:{placeholder:"请选择监管省份"},model:{value:e.serve_place,callback:function(t){e.serve_place=t},expression:"serve_place"}},[a("el-option",{attrs:{label:"青岛",value:"1"}}),a("el-option",{attrs:{label:"上海",value:"2"}}),a("el-option",{attrs:{label:"杭州",value:"3"}})],1),e._v(" 监管周期 "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.serve_timeRange,callback:function(t){e.serve_timeRange=t},expression:"serve_timeRange"}})],1),a("el-form-item",{attrs:{label:"监管种类"}},[a("el-select",{attrs:{placeholder:"请选择监管种类"},model:{value:e.serve_species,callback:function(t){e.serve_species=t},expression:"serve_species"}},[a("el-option",{attrs:{label:"钢铁",value:"1"}}),a("el-option",{attrs:{label:"棉花",value:"2"}}),a("el-option",{attrs:{label:"石油",value:"3"}}),a("el-option",{attrs:{label:"重金属",value:"4"}})],1),e._v(" 监管任务类型： "),a("el-select",{attrs:{placeholder:"请选择任务类型"},model:{value:e.serve_type,callback:function(t){e.serve_type=t},expression:"serve_type"}},[a("el-option",{attrs:{label:"信贷监管",value:"信贷监管"}}),a("el-option",{attrs:{label:"仓单监管",value:"仓单监管"}}),a("el-option",{attrs:{label:"质押权监管",value:"质押权监管"}}),a("el-option",{attrs:{label:"融资监管",value:"融资监管"}}),a("el-option",{attrs:{label:"主体查验",value:"主体查验"}}),a("el-option",{attrs:{label:"库存核实",value:"库存核实"}}),a("el-option",{attrs:{label:"报表审查",value:"报表审查"}}),a("el-option",{attrs:{label:"关联交易质押品审核",value:"关联交易质押品审核"}})],1)],1),a("el-button",{attrs:{type:"success"},on:{click:e.postAddress}},[e._v("立即创建")]),a("el-button",{attrs:{type:"info"},on:{click:e.abortForm}},[e._v("取消创建")])],1),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务集",name:"taskTree"}},[e._v(" 任务分解情况（目前仅为单笔） "),a("div",{staticStyle:{width:"900px",height:"400px"},attrs:{id:"echartContainer"}})]),a("el-tab-pane",{attrs:{label:"监管联盟图",name:"graphTwo",lazy:""},on:{click:e.getMap}},[a("div",{staticStyle:{width:"900px",height:"600px"},attrs:{id:"container"}})])],1)],1)])},n=[],o=(a("b0c0"),a("b64b"),a("0661")),i={name:"Time_granularity",components:{},mounted:function(){},data:function(){return{serve_place:"",serve_species:"",serve_timeRange:"",serve_type:"",activeName:"taskTree",isUpdatastrategy:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{postAddress:function(){this.getData()},getData:function(){var e=this,t={name:this.serve_type,value:null,children:null};console.log("用户输入是："+t),Object(o["e"])(t).then((function(t){console.log(t.data.data[0]),0===t.data.data.length?e.$error("系统错误！请稍后重试！"):e.$message({type:"success",message:"任务分配已完成，请从下方查看分解情况。"}),e.drawLine(t.data.data[0])})).catch((function(){console.log("postTaskDecompositionApi fail")}))},drawLine:function(e){var t=this.$echarts.init(document.getElementById("echartContainer")),a=e;function l(e){"undefined"!=typeof e.seriesIndex&&"click"==e.type&&void 0!==e.value&&alert(e.name+"执行情况:  "+e.value)}t.setOption({tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",id:0,name:"tree1",data:[a],top:"10%",left:"8%",bottom:"22%",right:"20%",symbolSize:15,edgeShape:"polyline",edgeForkPosition:"63%",initialTreeDepth:3,lineStyle:{width:2},itemStyle:{borderColor:"#6A5ACD"},label:{backgroundColor:"#fff",position:"left",verticalAlign:"middle",align:"right"},leaves:{label:{position:"right",verticalAlign:"middle",align:"left"}}}]}),t.on("click",l)},getData_map:function(){var e=this;Object(o["d"])().then((function(t){for(var a=t.data.data,l=[],n=[],o=Object.keys(a),i=0;i<o.length-2;i++){var s={};s.source=o[i],s.target=o[i+1],n.push(s)}for(var r=0;r<o.length;r++){var c={};c.id=o[r],c.label=o[r],c.agent=!1,l.push(c);var p=c.id;console.log("nodeaaaaaaaa"+r+":"+a[p]);for(var u=0;u<a[p][u];u++){var d={};d.id=a[p][u],d.label=a[p][u],d.agent=!0,l.push(d);var g={};g.source=p,g.target=d.id,n.push(g)}console.log("node"+r+":"+c.id)}e.getChart_map(l,n),e.$message({type:"success",message:"已形成联盟！"})})).catch((function(){console.log("getTaskApi fail")}))},getChart_map:function(e,t){console.log("刷新了这个页面-所以可以显示");console.log("刷新了这个页面-页面结束")},handleClick:function(e,t){console.log(e,t),"graphTwo"==this.activeName&&this.getData_map()}}},s=i,r=a("2877"),c=Object(r["a"])(s,l,n,!1,null,"330388f2",null);t["default"]=c.exports},b64b:function(e,t,a){var l=a("23e7"),n=a("7b0b"),o=a("df75"),i=a("d039"),s=i((function(){o(1)}));l({target:"Object",stat:!0,forced:s},{keys:function(e){return o(n(e))}})}}]);
//# sourceMappingURL=chunk-3f7c6d55.b8f53d2c.js.map